System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(){"use strict";var t,n,e,i,r,o,a,s,c,u,l;return{setters:[function(r){t=r.a,n=r.i,e=r.o,i=r.a5},function(t){r=t.e,o=t.aY,a=t.n,s=t.aW,c=t.m,u=t.aZ,l=t.aa}],execute:function(){function h(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function f(t){let n=t,e=t;function i(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const o=i+r>>>1;e(t[o],n)<0?i=o+1:r=o}return i}return 1===t.length&&(n=(n,e)=>t(n)-e,e=function(t){return(n,e)=>h(t(n),e)}(t)),{left:i,center:function(t,e,r,o){null==r&&(r=0),null==o&&(o=t.length);const a=i(t,e,r,o-1);return a>r&&n(t[a-1],e)>-n(t[a],e)?a-1:a},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}t("click",".js-sub-dependencies",(async function({currentTarget:t}){const n=t,e=n.getAttribute("data-loaded"),i=n.querySelector(".js-expanded"),o=n.querySelector(".js-collapsed"),a=n.closest(".js-details-container");if(i&&i.classList.toggle("d-none"),o&&o.classList.toggle("d-none"),a&&a.classList.toggle("color-bg-secondary"),!e){n.setAttribute("data-loaded","true");const t=n.getAttribute("data-sub-dependency-url"),e=n.closest(".js-dependency"),i=await r(document,t);e&&e.after(i)}}));const p=f(h).right;f((function(t){return null===t?NaN:+t})).center;function d(t,n){let e,i;if(void 0===n)for(const r of t)null!=r&&(void 0===e?r>=r&&(e=i=r):(e>r&&(e=r),i<r&&(i=r)));else{let r=-1;for(let o of t)null!=(o=n(o,++r,t))&&(void 0===e?o>=o&&(e=i=o):(e>o&&(e=o),i<o&&(i=o)))}return[e,i]}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let i=0;i<this._n&&i<32;i++){const r=n[i],o=t+r,a=Math.abs(t)<Math.abs(r)?t-(o-r):r-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,i,r=this._n,o=0;if(r>0){for(o=t[--r];r>0&&(n=o,e=t[--r],o=n+e,i=e-(o-n),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(e=2*i,n=o+e,e==n-o&&(o=n))}return o}}var m=Math.sqrt(50),g=Math.sqrt(10),v=Math.sqrt(2);function y(t,n,e){var i=(n-t)/Math.max(0,e),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return r>=0?(o>=m?10:o>=g?5:o>=v?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(o>=m?10:o>=g?5:o>=v?2:1)}function w(t,n,e){var i=Math.abs(n-t)/Math.max(0,e),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=m?r*=10:o>=g?r*=5:o>=v&&(r*=2),n<t?-r:r}function x(t,n){let e;if(void 0===n)for(const i of t)null!=i&&(e<i||void 0===e&&i>=i)&&(e=i);else{let i=-1;for(let r of t)null!=(r=n(r,++i,t))&&(e<r||void 0===e&&r>=r)&&(e=r)}return e}function _(t,n){let e;if(void 0===n)for(const i of t)null!=i&&(e>i||void 0===e&&i>=i)&&(e=i);else{let i=-1;for(let r of t)null!=(r=n(r,++i,t))&&(e>r||void 0===e&&r>=r)&&(e=r)}return e}function b(t,n,e=0,i=t.length-1,r=h){for(;i>e;){if(i-e>600){const o=i-e+1,a=n-e+1,s=Math.log(o),c=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*c*(o-c)/o)*(a-o/2<0?-1:1);b(t,n,Math.max(e,Math.floor(n-a*c/o+u)),Math.min(i,Math.floor(n+(o-a)*c/o+u)),r)}const o=t[n];let a=e,s=i;for(M(t,e,n),r(t[i],o)>0&&M(t,e,i);a<s;){for(M(t,a,s),++a,--s;r(t[a],o)<0;)++a;for(;r(t[s],o)>0;)--s}0===r(t[e],o)?M(t,e,s):(++s,M(t,s,i)),s<=n&&(e=s+1),n<=s&&(i=s-1)}return t}function M(t,n,e){const i=t[n];t[n]=t[e],t[e]=i}function k(t,n,e){if(i=(t=Float64Array.from(function*(t,n){if(void 0===n)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let e=-1;for(let i of t)null!=(i=n(i,++e,t))&&(i=+i)>=i&&(yield i)}}(t,e))).length){if((n=+n)<=0||i<2)return _(t);if(n>=1)return x(t);var i,r=(i-1)*n,o=Math.floor(r),a=x(b(t,o).subarray(0,o+1));return a+(_(t.subarray(o+1))-a)*(r-o)}}function S(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function T(t,n,e){t=+t,n=+n,e=(r=arguments.length)<2?(n=t,t=0,1):r<3?1:+e;for(var i=-1,r=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(r);++i<r;)o[i]=t+i*e;return o}var C=Array.prototype.slice;function L(t){return t}var H=1e-6;function A(t){return"translate("+(t+.5)+",0)"}function E(t){return"translate(0,"+(t+.5)+")"}function N(t){return n=>+t(n)}function U(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}function $(){return!this.__axis}function q(t,n){var e=[],i=null,r=null,o=6,a=6,s=3,c=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",l=1===t||3===t?A:E;function h(h){var f=null==i?n.ticks?n.ticks.apply(n,e):n.domain():i,p=null==r?n.tickFormat?n.tickFormat.apply(n,e):L:r,d=Math.max(o,0)+s,m=n.range(),g=+m[0]+.5,v=+m[m.length-1]+.5,y=(n.bandwidth?U:N)(n.copy()),w=h.selection?h.selection():h,x=w.selectAll(".domain").data([null]),_=w.selectAll(".tick").data(f,n).order(),b=_.exit(),M=_.enter().append("g").attr("class","tick"),k=_.select("line"),S=_.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(M),k=k.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*o)),S=S.merge(M.append("text").attr("fill","currentColor").attr(u,c*d).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),h!==w&&(x=x.transition(h),_=_.transition(h),k=k.transition(h),S=S.transition(h),b=b.transition(h).attr("opacity",H).attr("transform",(function(t){return isFinite(t=y(t))?l(t):this.getAttribute("transform")})),M.attr("opacity",H).attr("transform",(function(t){var n=this.parentNode.__axis;return l(n&&isFinite(n=n(t))?n:y(t))}))),b.remove(),x.attr("d",4===t||2==t?a?"M"+c*a+","+g+"H0.5V"+v+"H"+c*a:"M0.5,"+g+"V"+v:a?"M"+g+","+c*a+"V0.5H"+v+"V"+c*a:"M"+g+",0.5H"+v),_.attr("opacity",1).attr("transform",(function(t){return l(y(t))})),k.attr(u+"2",c*o),S.attr(u,c*d).text(p),w.filter($).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),w.each((function(){this.__axis=y}))}return h.scale=function(t){return arguments.length?(n=t,h):n},h.ticks=function(){return e=C.call(arguments),h},h.tickArguments=function(t){return arguments.length?(e=null==t?[]:C.call(t),h):e.slice()},h.tickValues=function(t){return arguments.length?(i=null==t?null:C.call(t),h):i&&i.slice()},h.tickFormat=function(t){return arguments.length?(r=t,h):r},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h}function j(t){return q(2,t)}function z(t){return q(3,t)}function P(t){return q(4,t)}function D(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}var Y="$";function F(){}function R(t,n){var e=new F;if(t instanceof F)t.each((function(t,n){e.set(n,t)}));else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==n)for(;++r<o;)e.set(r,t[r]);else for(;++r<o;)e.set(n(i=t[r],r,t),i)}else if(t)for(var a in t)e.set(a,t[a]);return e}function X(){}F.prototype=R.prototype={constructor:F,has:function(t){return Y+t in this},get:function(t){return this[Y+t]},set:function(t,n){return this[Y+t]=n,this},remove:function(t){var n=Y+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===Y&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===Y&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===Y&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===Y&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===Y&&++t;return t},empty:function(){for(var t in this)if(t[0]===Y)return!1;return!0},each:function(t){for(var n in this)n[0]===Y&&t(this[n],n.slice(1),this)}};var B=R.prototype;X.prototype=function(t,n){var e=new X;if(t instanceof X)t.each((function(t){e.add(t)}));else if(t){var i=-1,r=t.length;if(null==n)for(;++i<r;)e.add(t[i]);else for(;++i<r;)e.add(n(t[i],i,t))}return e}.prototype={constructor:X,has:B.has,add:function(t){return this[Y+(t+="")]=t,this},remove:B.remove,clear:B.clear,values:B.keys,size:B.size,empty:B.empty,each:B.each};var W=Array.prototype,I=W.map,O=W.slice,V={name:"implicit"};function G(){var t=R(),n=[],e=[],i=V;function r(r){var o=r+"",a=t.get(o);if(!a){if(i!==V)return i;t.set(o,a=n.push(r))}return e[(a-1)%e.length]}return r.domain=function(e){if(!arguments.length)return n.slice();n=[],t=R();for(var i,o,a=-1,s=e.length;++a<s;)t.has(o=(i=e[a])+"")||t.set(o,n.push(i));return r},r.range=function(t){return arguments.length?(e=O.call(t),r):e.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return G(n,e).unknown(i)},D.apply(r,arguments),r}function Z(){var t,n,e=G().unknown(void 0),i=e.domain,r=e.range,o=[0,1],a=!1,s=0,c=0,u=.5;function l(){var e=i().length,l=o[1]<o[0],h=o[l-0],f=o[1-l];t=(f-h)/Math.max(1,e-s+2*c),a&&(t=Math.floor(t)),h+=(f-h-t*(e-s))*u,n=t*(1-s),a&&(h=Math.round(h),n=Math.round(n));var p=T(e).map((function(n){return h+t*n}));return r(l?p.reverse():p)}return delete e.unknown,e.domain=function(t){return arguments.length?(i(t),l()):i()},e.range=function(t){return arguments.length?(o=[+t[0],+t[1]],l()):o.slice()},e.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,l()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(a=!!t,l()):a},e.padding=function(t){return arguments.length?(s=Math.min(1,c=+t),l()):s},e.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),l()):s},e.paddingOuter=function(t){return arguments.length?(c=+t,l()):c},e.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},e.copy=function(){return Z(i(),o).round(a).paddingInner(s).paddingOuter(c).align(u)},D.apply(l(),arguments)}function J(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function K(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function Q(){}var tt=.7,nt=1/tt,et="\\s*([+-]?\\d+)\\s*",it="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ot=/^#([0-9a-f]{3})$/,at=/^#([0-9a-f]{6})$/,st=new RegExp("^rgb\\("+[et,et,et]+"\\)$"),ct=new RegExp("^rgb\\("+[rt,rt,rt]+"\\)$"),ut=new RegExp("^rgba\\("+[et,et,et,it]+"\\)$"),lt=new RegExp("^rgba\\("+[rt,rt,rt,it]+"\\)$"),ht=new RegExp("^hsl\\("+[it,rt,rt]+"\\)$"),ft=new RegExp("^hsla\\("+[it,rt,rt,it]+"\\)$"),pt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dt(t){var n;return t=(t+"").trim().toLowerCase(),(n=ot.exec(t))?new wt((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=at.exec(t))?mt(parseInt(n[1],16)):(n=st.exec(t))?new wt(n[1],n[2],n[3],1):(n=ct.exec(t))?new wt(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=ut.exec(t))?gt(n[1],n[2],n[3],n[4]):(n=lt.exec(t))?gt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=ht.exec(t))?xt(n[1],n[2]/100,n[3]/100,1):(n=ft.exec(t))?xt(n[1],n[2]/100,n[3]/100,n[4]):pt.hasOwnProperty(t)?mt(pt[t]):"transparent"===t?new wt(NaN,NaN,NaN,0):null}function mt(t){return new wt(t>>16&255,t>>8&255,255&t,1)}function gt(t,n,e,i){return i<=0&&(t=n=e=NaN),new wt(t,n,e,i)}function vt(t){return t instanceof Q||(t=dt(t)),t?new wt((t=t.rgb()).r,t.g,t.b,t.opacity):new wt}function yt(t,n,e,i){return 1===arguments.length?vt(t):new wt(t,n,e,null==i?1:i)}function wt(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}function xt(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new bt(t,n,e,i)}function _t(t){if(t instanceof bt)return new bt(t.h,t.s,t.l,t.opacity);if(t instanceof Q||(t=dt(t)),!t)return new bt;if(t instanceof bt)return t;var n=(t=t.rgb()).r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),a=NaN,s=o-r,c=(o+r)/2;return s?(a=n===o?(e-i)/s+6*(e<i):e===o?(i-n)/s+2:(n-e)/s+4,s/=c<.5?o+r:2-o-r,a*=60):s=c>0&&c<1?0:a,new bt(a,s,c,t.opacity)}function bt(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}function Mt(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}J(Q,dt,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),J(wt,yt,K(Q,{brighter:function(t){return t=null==t?nt:Math.pow(nt,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?tt:Math.pow(tt,t),new wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),J(bt,(function(t,n,e,i){return 1===arguments.length?_t(t):new bt(t,n,e,null==i?1:i)}),K(Q,{brighter:function(t){return t=null==t?nt:Math.pow(nt,t),new bt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?tt:Math.pow(tt,t),new bt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new wt(Mt(t>=240?t-240:t+120,r,i),Mt(t,r,i),Mt(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var kt=Math.PI/180,St=180/Math.PI,Tt=.95047,Ct=1.08883,Lt=4/29,Ht=6/29,At=3*Ht*Ht;function Et(t){if(t instanceof Nt)return new Nt(t.l,t.a,t.b,t.opacity);if(t instanceof Pt){var n=t.h*kt;return new Nt(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof wt||(t=vt(t));var e=jt(t.r),i=jt(t.g),r=jt(t.b),o=Ut((.4124564*e+.3575761*i+.1804375*r)/Tt),a=Ut((.2126729*e+.7151522*i+.072175*r)/1);return new Nt(116*a-16,500*(o-a),200*(a-Ut((.0193339*e+.119192*i+.9503041*r)/Ct)),t.opacity)}function Nt(t,n,e,i){this.l=+t,this.a=+n,this.b=+e,this.opacity=+i}function Ut(t){return t>.008856451679035631?Math.pow(t,1/3):t/At+Lt}function $t(t){return t>Ht?t*t*t:At*(t-Lt)}function qt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function jt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function zt(t){if(t instanceof Pt)return new Pt(t.h,t.c,t.l,t.opacity);t instanceof Nt||(t=Et(t));var n=Math.atan2(t.b,t.a)*St;return new Pt(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Pt(t,n,e,i){this.h=+t,this.c=+n,this.l=+e,this.opacity=+i}J(Nt,(function(t,n,e,i){return 1===arguments.length?Et(t):new Nt(t,n,e,null==i?1:i)}),K(Q,{brighter:function(t){return new Nt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Nt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return t=1*$t(t),new wt(qt(3.2404542*(n=Tt*$t(n))-1.5371385*t-.4985314*(e=Ct*$t(e))),qt(-.969266*n+1.8760108*t+.041556*e),qt(.0556434*n-.2040259*t+1.0572252*e),this.opacity)}})),J(Pt,(function(t,n,e,i){return 1===arguments.length?zt(t):new Pt(t,n,e,null==i?1:i)}),K(Q,{brighter:function(t){return new Pt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Pt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Et(this).rgb()}}));var Dt=-.14861,Yt=1.78277,Ft=-.29227,Rt=-.90649,Xt=1.97294,Bt=Xt*Rt,Wt=Xt*Yt,It=Yt*Ft-Rt*Dt;function Ot(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);t instanceof wt||(t=vt(t));var n=t.r/255,e=t.g/255,i=t.b/255,r=(It*i+Bt*n-Wt*e)/(It+Bt-Wt),o=i-r,a=(Xt*(e-r)-Ft*o)/Rt,s=Math.sqrt(a*a+o*o)/(Xt*r*(1-r)),c=s?Math.atan2(a,o)*St-120:NaN;return new Vt(c<0?c+360:c,s,r,t.opacity)}function Vt(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}function Gt(t){return function(){return t}}function Zt(t){return 1==(t=+t)?Jt:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}(n,e,t):Gt(isNaN(n)?e:n)}}function Jt(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):Gt(isNaN(t)?n:t)}J(Vt,(function(t,n,e,i){return 1===arguments.length?Ot(t):new Vt(t,n,e,null==i?1:i)}),K(Q,{brighter:function(t){return t=null==t?nt:Math.pow(nt,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?tt:Math.pow(tt,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*kt,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(t),r=Math.sin(t);return new wt(255*(n+e*(Dt*i+Yt*r)),255*(n+e*(Ft*i+Rt*r)),255*(n+e*(Xt*i)),this.opacity)}}));var Kt=function t(n){var e=Zt(n);function i(t,n){var i=e((t=yt(t)).r,(n=yt(n)).r),r=e(t.g,n.g),o=e(t.b,n.b),a=Jt(t.opacity,n.opacity);return function(n){return t.r=i(n),t.g=r(n),t.b=o(n),t.opacity=a(n),t+""}}return i.gamma=t,i}(1);function Qt(t,n){var e,i=n?n.length:0,r=t?Math.min(i,t.length):0,o=new Array(i),a=new Array(i);for(e=0;e<r;++e)o[e]=sn(t[e],n[e]);for(;e<i;++e)a[e]=n[e];return function(t){for(e=0;e<r;++e)a[e]=o[e](t);return a}}function tn(t,n){var e=new Date;return n-=t=+t,function(i){return e.setTime(t+n*i),e}}function nn(t,n){return n-=t=+t,function(e){return t+n*e}}function en(t,n){var e,i={},r={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?i[e]=sn(t[e],n[e]):r[e]=n[e];return function(t){for(e in i)r[e]=i[e](t);return r}}var rn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(rn.source,"g");function an(t,n){var e,i,r,o=rn.lastIndex=on.lastIndex=0,a=-1,s=[],c=[];for(t+="",n+="";(e=rn.exec(t))&&(i=on.exec(n));)(r=i.index)>o&&(r=n.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(e=e[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:nn(e,i)})),o=on.lastIndex;return o<n.length&&(r=n.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,i=0;i<n;++i)s[(e=c[i]).i]=e.x(t);return s.join("")})}function sn(t,n){var e,i=typeof n;return null==n||"boolean"===i?Gt(n):("number"===i?nn:"string"===i?(e=dt(n))?(n=e,Kt):an:n instanceof dt?Kt:n instanceof Date?tn:Array.isArray(n)?Qt:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?en:nn)(t,n)}function cn(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var un,ln,hn,fn,pn=180/Math.PI,dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mn(t,n,e,i,r,o){var a,s,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*i)&&(e-=t*c,i-=n*c),(s=Math.sqrt(e*e+i*i))&&(e/=s,i/=s,c/=s),t*i<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*pn,skewX:Math.atan(c)*pn,scaleX:a,scaleY:s}}function gn(t,n,e,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],c=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var c=a.push("translate(",null,n,null,e);s.push({i:c-4,x:nn(t,r)},{i:c-2,x:nn(i,o)})}else(r||o)&&a.push("translate("+r+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,s,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(r(e)+"rotate(",null,i)-2,x:nn(t,n)})):n&&e.push(r(e)+"rotate("+n+i)}(o.rotate,a.rotate,s,c),function(t,n,e,o){t!==n?o.push({i:e.push(r(e)+"skewX(",null,i)-2,x:nn(t,n)}):n&&e.push(r(e)+"skewX("+n+i)}(o.skewX,a.skewX,s,c),function(t,n,e,i,o,a){if(t!==e||n!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:nn(t,e)},{i:s-2,x:nn(n,i)})}else 1===e&&1===i||o.push(r(o)+"scale("+e+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,c),o=a=null,function(t){for(var n,e=-1,i=c.length;++e<i;)s[(n=c[e]).i]=n.x(t);return s.join("")}}}var vn=gn((function(t){return"none"===t?dn:(un||(un=document.createElement("DIV"),ln=document.documentElement,hn=document.defaultView),un.style.transform=t,t=hn.getComputedStyle(ln.appendChild(un),null).getPropertyValue("transform"),ln.removeChild(un),mn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),yn=gn((function(t){return null==t?dn:(fn||(fn=document.createElementNS("http://www.w3.org/2000/svg","g")),fn.setAttribute("transform",t),(t=fn.transform.baseVal.consolidate())?mn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):dn)}),", ",")",")"),wn=Math.SQRT2;function xn(t){return((t=Math.exp(t))+1/t)/2}function _n(t,n){var e,i,r=t[0],o=t[1],a=t[2],s=n[0],c=n[1],u=n[2],l=s-r,h=c-o,f=l*l+h*h;if(f<1e-12)i=Math.log(u/a)/wn,e=function(t){return[r+t*l,o+t*h,a*Math.exp(wn*t*i)]};else{var p=Math.sqrt(f),d=(u*u-a*a+4*f)/(2*a*2*p),m=(u*u-a*a-4*f)/(2*u*2*p),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(m*m+1)-m);i=(v-g)/wn,e=function(t){var n=t*i,e=xn(g),s=a/(2*p)*(e*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(wn*n+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[r+s*l,o+s*h,a*e/xn(wn*n+g)]}}return e.duration=1e3*i,e}function bn(t){return+t}var Mn=[0,1];function kn(t){return t}function Sn(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:function(t){return function(){return t}}(isNaN(n)?NaN:.5)}function Tn(t){var n,e=t[0],i=t[t.length-1];return e>i&&(n=e,e=i,i=n),function(t){return Math.max(e,Math.min(i,t))}}function Cn(t,n,e){var i=t[0],r=t[1],o=n[0],a=n[1];return r<i?(i=Sn(r,i),o=e(a,o)):(i=Sn(i,r),o=e(o,a)),function(t){return o(i(t))}}function Ln(t,n,e){var i=Math.min(t.length,n.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<i;)r[a]=Sn(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(n){var e=p(t,n,1,i)-1;return o[e](r[e](n))}}function Hn(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function An(){var t,n,e,i,r,o,a=Mn,s=Mn,c=sn,u=kn;function l(){return i=Math.min(a.length,s.length)>2?Ln:Cn,r=o=null,h}function h(n){return isNaN(n=+n)?e:(r||(r=i(a.map(t),s,c)))(t(u(n)))}return h.invert=function(e){return u(n((o||(o=i(s,a.map(t),nn)))(e)))},h.domain=function(t){return arguments.length?(a=I.call(t,bn),u===kn||(u=Tn(a)),l()):a.slice()},h.range=function(t){return arguments.length?(s=O.call(t),l()):s.slice()},h.rangeRound=function(t){return s=O.call(t),c=cn,l()},h.clamp=function(t){return arguments.length?(u=t?Tn(a):kn,h):u!==kn},h.interpolate=function(t){return arguments.length?(c=t,l()):c},h.unknown=function(t){return arguments.length?(e=t,h):e},function(e,i){return t=e,n=i,l()}}function En(t,n){return An()(t,n)}function Nn(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,i=t.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+t.slice(e+1)]}function Un(t){return(t=Nn(Math.abs(t)))?t[1]:NaN}var $n,qn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jn(t){if(!(n=qn.exec(t)))throw new Error("invalid format: "+t);var n;return new zn({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function zn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Pn(t,n){var e=Nn(t,n);if(!e)return t+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}jn.prototype=zn.prototype,zn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Dn={"%":(t,n)=>(100*t).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Pn(100*t,n),r:Pn,s:function(t,n){var e=Nn(t,n);if(!e)return t+"";var i=e[0],r=e[1],o=r-($n=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Nn(t,Math.max(0,n+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Yn(t){return t}var Fn,Rn,Xn,Bn=Array.prototype.map,Wn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function In(t){var n,e,i=void 0===t.grouping||void 0===t.thousands?Yn:(n=Bn.call(t.grouping,Number),e=t.thousands+"",function(t,i){for(var r=t.length,o=[],a=0,s=n[0],c=0;r>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),o.push(t.substring(r-=s,r+s)),!((c+=s+1)>i));)s=n[a=(a+1)%n.length];return o.reverse().join(e)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Yn:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(Bn.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var n=(t=jn(t)).fill,e=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Dn[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===n&&"="===e)&&(p=!0,n="0",e="=");var w="$"===f?r:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===f?o:/[%p]/.test(y)?c:"",_=Dn[y],b=/[defgprs%]/.test(y);function M(t){var r,o,c,f=w,M=x;if("c"===y)M=_(t)+M,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),g),v&&(t=function(t){t:for(var n,e=t.length,i=1,r=-1;i<e;++i)switch(t[i]){case".":r=n=i;break;case"0":0===r&&(r=i),n=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(n+1):t}(t)),k&&0==+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:u:"-"===h||"("===h?"":h)+f,M=("s"===y?Wn[8+$n/3]:"")+M+(k&&"("===h?")":""),b)for(r=-1,o=t.length;++r<o;)if(48>(c=t.charCodeAt(r))||c>57){M=(46===c?a+t.slice(r+1):t.slice(r))+M,t=t.slice(0,r);break}}m&&!p&&(t=i(t,1/0));var S=f.length+t.length+M.length,T=S<d?new Array(d-S+1).join(n):"";switch(m&&p&&(t=i(T+t,T.length?d-M.length:1/0),T=""),e){case"<":t=f+t+M+T;break;case"=":t=f+T+t+M;break;case"^":t=T.slice(0,S=T.length>>1)+f+t+M+T.slice(S);break;default:t=T+f+t+M}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),M.toString=function(){return t+""},M}return{format:h,formatPrefix:function(t,n){var e=h(((t=jn(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Un(n)/3))),r=Math.pow(10,-i),o=Wn[8+i/3];return function(t){return e(r*t)+o}}}}function On(t,n,e,i){var r,o=w(t,n,e);switch((i=jn(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(n));return null!=i.precision||isNaN(r=function(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Un(n)/3)))-Un(Math.abs(t)))}(o,a))||(i.precision=r),Xn(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Un(n)-Un(t))+1}(o,Math.max(Math.abs(t),Math.abs(n))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Un(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return Rn(i)}function Vn(t){var n=t.domain;return t.ticks=function(t){var e=n();return function(t,n,e){var i,r,o,a,s=-1;if(e=+e,(t=+t)==(n=+n)&&e>0)return[t];if((i=n<t)&&(r=t,t=n,n=r),0===(a=y(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(r=Math.ceil(n-t+1));++s<r;)o[s]=(t+s)*a;else for(a=-a,t=Math.ceil(t*a),n=Math.floor(n*a),o=new Array(r=Math.ceil(n-t+1));++s<r;)o[s]=(t+s)/a;return i&&o.reverse(),o}(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var i=n();return On(i[0],i[i.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var i,r=n(),o=0,a=r.length-1,s=r[o],c=r[a];return c<s&&(i=s,s=c,c=i,i=o,o=a,a=i),(i=y(s,c,e))>0?i=y(s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i,e):i<0&&(i=y(s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i,e)),i>0?(r[o]=Math.floor(s/i)*i,r[a]=Math.ceil(c/i)*i,n(r)):i<0&&(r[o]=Math.ceil(s*i)/i,r[a]=Math.floor(c*i)/i,n(r)),t},t}function Gn(){var t=En(kn,kn);return t.copy=function(){return Hn(t,Gn())},D.apply(t,arguments),Vn(t)}function Zn(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Jn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kn(t){return t<0?-t*t:t*t}function Qn(t){var n=t(kn,kn),e=1;function i(){return 1===e?t(kn,kn):.5===e?t(Jn,Kn):t(Zn(e),Zn(1/e))}return n.exponent=function(t){return arguments.length?(e=+t,i()):e},Vn(n)}function te(){var t=Qn(An());return t.copy=function(){return Hn(t,te()).exponent(t.exponent())},D.apply(t,arguments),t}Fn=In({thousands:",",grouping:[3],currency:["$",""]}),Rn=Fn.format,Xn=Fn.formatPrefix;var ne=new Date,ee=new Date;function ie(t,n,e,i){function r(n){return t(n=0===arguments.length?new Date:new Date(+n)),n}return r.floor=function(n){return t(n=new Date(+n)),n},r.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},r.round=function(t){var n=r(t),e=r.ceil(t);return t-n<e-t?n:e},r.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},r.range=function(e,i,o){var a,s=[];if(e=r.ceil(e),o=null==o?1:Math.floor(o),!(e<i&&o>0))return s;do{s.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<i);return s},r.filter=function(e){return ie((function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)}),(function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;n(t,-1),!e(t););else for(;--i>=0;)for(;n(t,1),!e(t););}))},e&&(r.count=function(n,i){return ne.setTime(+n),ee.setTime(+i),t(ne),t(ee),Math.floor(e(ne,ee))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(n){return i(n)%t==0}:function(n){return r.count(0,n)%t==0}):r:null}),r}var re=ie((function(){}),(function(t,n){t.setTime(+t+n)}),(function(t,n){return n-t}));re.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ie((function(n){n.setTime(Math.floor(n/t)*t)}),(function(n,e){n.setTime(+n+e*t)}),(function(n,e){return(e-n)/t})):re:null};var oe=1e3,ae=6e4,se=36e5,ce=864e5,ue=6048e5,le=ie((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,n){t.setTime(+t+n*oe)}),(function(t,n){return(n-t)/oe}),(function(t){return t.getUTCSeconds()})),he=ie((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oe)}),(function(t,n){t.setTime(+t+n*ae)}),(function(t,n){return(n-t)/ae}),(function(t){return t.getMinutes()})),fe=ie((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oe-t.getMinutes()*ae)}),(function(t,n){t.setTime(+t+n*se)}),(function(t,n){return(n-t)/se}),(function(t){return t.getHours()})),pe=ie((t=>t.setHours(0,0,0,0)),((t,n)=>t.setDate(t.getDate()+n)),((t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ae)/ce),(t=>t.getDate()-1));function de(t){return ie((function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)}),(function(t,n){t.setDate(t.getDate()+7*n)}),(function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ae)/ue}))}var me=de(0),ge=de(1),ve=(de(2),de(3),de(4)),ye=(de(5),de(6),me.range),we=ie((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,n){t.setMonth(t.getMonth()+n)}),(function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),xe=ie((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n)}),(function(t,n){return n.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));xe.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ie((function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,e){n.setFullYear(n.getFullYear()+e*t)})):null};var _e=ie((function(t){t.setUTCSeconds(0,0)}),(function(t,n){t.setTime(+t+n*ae)}),(function(t,n){return(n-t)/ae}),(function(t){return t.getUTCMinutes()})),be=ie((function(t){t.setUTCMinutes(0,0,0)}),(function(t,n){t.setTime(+t+n*se)}),(function(t,n){return(n-t)/se}),(function(t){return t.getUTCHours()})),Me=ie((function(t){t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+n)}),(function(t,n){return(n-t)/ce}),(function(t){return t.getUTCDate()-1}));function ke(t){return ie((function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCDate(t.getUTCDate()+7*n)}),(function(t,n){return(n-t)/ue}))}var Se=ke(0),Te=ke(1),Ce=(ke(2),ke(3),ke(4)),Le=(ke(5),ke(6),ie((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCMonth(t.getUTCMonth()+n)}),(function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()}))),He=ie((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)}),(function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));function Ae(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ee(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ne(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}He.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ie((function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)})):null};var Ue,$e,qe,je={"-":"",_:" ",0:"0"},ze=/^\s*\d+/,Pe=/^%/,De=/[\\^$*+?|[\]().{}]/g;function Ye(t,n,e){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<e?new Array(e-o+1).join(n)+r:r)}function Fe(t){return t.replace(De,"\\$&")}function Re(t){return new RegExp("^(?:"+t.map(Fe).join("|")+")","i")}function Xe(t){for(var n={},e=-1,i=t.length;++e<i;)n[t[e].toLowerCase()]=e;return n}function Be(t,n,e){var i=ze.exec(n.slice(e,e+1));return i?(t.w=+i[0],e+i[0].length):-1}function We(t,n,e){var i=ze.exec(n.slice(e,e+1));return i?(t.u=+i[0],e+i[0].length):-1}function Ie(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.U=+i[0],e+i[0].length):-1}function Oe(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.V=+i[0],e+i[0].length):-1}function Ve(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.W=+i[0],e+i[0].length):-1}function Ge(t,n,e){var i=ze.exec(n.slice(e,e+4));return i?(t.y=+i[0],e+i[0].length):-1}function Ze(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function Je(t,n,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function Ke(t,n,e){var i=ze.exec(n.slice(e,e+1));return i?(t.q=3*i[0]-3,e+i[0].length):-1}function Qe(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.m=i[0]-1,e+i[0].length):-1}function ti(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.d=+i[0],e+i[0].length):-1}function ni(t,n,e){var i=ze.exec(n.slice(e,e+3));return i?(t.m=0,t.d=+i[0],e+i[0].length):-1}function ei(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.H=+i[0],e+i[0].length):-1}function ii(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.M=+i[0],e+i[0].length):-1}function ri(t,n,e){var i=ze.exec(n.slice(e,e+2));return i?(t.S=+i[0],e+i[0].length):-1}function oi(t,n,e){var i=ze.exec(n.slice(e,e+3));return i?(t.L=+i[0],e+i[0].length):-1}function ai(t,n,e){var i=ze.exec(n.slice(e,e+6));return i?(t.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function si(t,n,e){var i=Pe.exec(n.slice(e,e+1));return i?e+i[0].length:-1}function ci(t,n,e){var i=ze.exec(n.slice(e));return i?(t.Q=+i[0],e+i[0].length):-1}function ui(t,n,e){var i=ze.exec(n.slice(e));return i?(t.s=+i[0],e+i[0].length):-1}function li(t,n){return Ye(t.getDate(),n,2)}function hi(t,n){return Ye(t.getHours(),n,2)}function fi(t,n){return Ye(t.getHours()%12||12,n,2)}function pi(t,n){return Ye(1+pe.count(xe(t),t),n,3)}function di(t,n){return Ye(t.getMilliseconds(),n,3)}function mi(t,n){return di(t,n)+"000"}function gi(t,n){return Ye(t.getMonth()+1,n,2)}function vi(t,n){return Ye(t.getMinutes(),n,2)}function yi(t,n){return Ye(t.getSeconds(),n,2)}function wi(t){var n=t.getDay();return 0===n?7:n}function xi(t,n){return Ye(me.count(xe(t)-1,t),n,2)}function _i(t){var n=t.getDay();return n>=4||0===n?ve(t):ve.ceil(t)}function bi(t,n){return t=_i(t),Ye(ve.count(xe(t),t)+(4===xe(t).getDay()),n,2)}function Mi(t){return t.getDay()}function ki(t,n){return Ye(ge.count(xe(t)-1,t),n,2)}function Si(t,n){return Ye(t.getFullYear()%100,n,2)}function Ti(t,n){return Ye((t=_i(t)).getFullYear()%100,n,2)}function Ci(t,n){return Ye(t.getFullYear()%1e4,n,4)}function Li(t,n){var e=t.getDay();return Ye((t=e>=4||0===e?ve(t):ve.ceil(t)).getFullYear()%1e4,n,4)}function Hi(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+Ye(n/60|0,"0",2)+Ye(n%60,"0",2)}function Ai(t,n){return Ye(t.getUTCDate(),n,2)}function Ei(t,n){return Ye(t.getUTCHours(),n,2)}function Ni(t,n){return Ye(t.getUTCHours()%12||12,n,2)}function Ui(t,n){return Ye(1+Me.count(He(t),t),n,3)}function $i(t,n){return Ye(t.getUTCMilliseconds(),n,3)}function qi(t,n){return $i(t,n)+"000"}function ji(t,n){return Ye(t.getUTCMonth()+1,n,2)}function zi(t,n){return Ye(t.getUTCMinutes(),n,2)}function Pi(t,n){return Ye(t.getUTCSeconds(),n,2)}function Di(t){var n=t.getUTCDay();return 0===n?7:n}function Yi(t,n){return Ye(Se.count(He(t)-1,t),n,2)}function Fi(t){var n=t.getUTCDay();return n>=4||0===n?Ce(t):Ce.ceil(t)}function Ri(t,n){return t=Fi(t),Ye(Ce.count(He(t),t)+(4===He(t).getUTCDay()),n,2)}function Xi(t){return t.getUTCDay()}function Bi(t,n){return Ye(Te.count(He(t)-1,t),n,2)}function Wi(t,n){return Ye(t.getUTCFullYear()%100,n,2)}function Ii(t,n){return Ye((t=Fi(t)).getUTCFullYear()%100,n,2)}function Oi(t,n){return Ye(t.getUTCFullYear()%1e4,n,4)}function Vi(t,n){var e=t.getUTCDay();return Ye((t=e>=4||0===e?Ce(t):Ce.ceil(t)).getUTCFullYear()%1e4,n,4)}function Gi(){return"+0000"}function Zi(){return"%"}function Ji(t){return+t}function Ki(t){return Math.floor(+t/1e3)}!function(t){Ue=function(t){var n=t.dateTime,e=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=Re(r),l=Xe(r),h=Re(o),f=Xe(o),p=Re(a),d=Xe(a),m=Re(s),g=Xe(s),v=Re(c),y=Xe(c),w={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:li,e:li,f:mi,g:Ti,G:Li,H:hi,I:fi,j:pi,L:di,m:gi,M:vi,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ji,s:Ki,S:yi,u:wi,U:xi,V:bi,w:Mi,W:ki,x:null,X:null,y:Si,Y:Ci,Z:Hi,"%":Zi},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ai,e:Ai,f:qi,g:Ii,G:Vi,H:Ei,I:Ni,j:Ui,L:$i,m:ji,M:zi,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ji,s:Ki,S:Pi,u:Di,U:Yi,V:Ri,w:Xi,W:Bi,x:null,X:null,y:Wi,Y:Oi,Z:Gi,"%":Zi},_={a:function(t,n,e){var i=p.exec(n.slice(e));return i?(t.w=d[i[0].toLowerCase()],e+i[0].length):-1},A:function(t,n,e){var i=h.exec(n.slice(e));return i?(t.w=f[i[0].toLowerCase()],e+i[0].length):-1},b:function(t,n,e){var i=v.exec(n.slice(e));return i?(t.m=y[i[0].toLowerCase()],e+i[0].length):-1},B:function(t,n,e){var i=m.exec(n.slice(e));return i?(t.m=g[i[0].toLowerCase()],e+i[0].length):-1},c:function(t,e,i){return k(t,n,e,i)},d:ti,e:ti,f:ai,g:Ze,G:Ge,H:ei,I:ei,j:ni,L:oi,m:Qe,M:ii,p:function(t,n,e){var i=u.exec(n.slice(e));return i?(t.p=l[i[0].toLowerCase()],e+i[0].length):-1},q:Ke,Q:ci,s:ui,S:ri,u:We,U:Ie,V:Oe,w:Be,W:Ve,x:function(t,n,i){return k(t,e,n,i)},X:function(t,n,e){return k(t,i,n,e)},y:Ze,Y:Ge,Z:Je,"%":si};function b(t,n){return function(e){var i,r,o,a=[],s=-1,c=0,u=t.length;for(e instanceof Date||(e=new Date(+e));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(c,s)),null!=(r=je[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(o=n[i])&&(i=o(e,r)),a.push(i),c=s+1);return a.push(t.slice(c,s)),a.join("")}}function M(t,n){return function(e){var i,r,o=Ne(1900,void 0,1);if(k(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(n&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=Ee(Ne(o.y,0,1))).getUTCDay(),i=r>4||0===r?Te.ceil(i):Te(i),i=Me.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=Ae(Ne(o.y,0,1))).getDay(),i=r>4||0===r?ge.ceil(i):ge(i),i=pe.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?Ee(Ne(o.y,0,1)).getUTCDay():Ae(Ne(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ee(o)):Ae(o)}}function k(t,n,e,i){for(var r,o,a=0,s=n.length,c=e.length;a<s;){if(i>=c)return-1;if(37===(r=n.charCodeAt(a++))){if(r=n.charAt(a++),!(o=_[r in je?n.charAt(a++):r])||(i=o(t,e,i))<0)return-1}else if(r!=e.charCodeAt(i++))return-1}return i}return w.x=b(e,w),w.X=b(i,w),w.c=b(n,w),x.x=b(e,x),x.X=b(i,x),x.c=b(n,x),{format:function(t){var n=b(t+="",w);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",!1);return n.toString=function(){return t},n},utcFormat:function(t){var n=b(t+="",x);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t+="",!0);return n.toString=function(){return t},n}}}(t),$e=Ue.format,Ue.parse,qe=Ue.utcFormat,Ue.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Qi=1e3,tr=6e4,nr=36e5,er=864e5,ir=2592e6,rr=31536e6;function or(t){return new Date(t)}function ar(t){return t instanceof Date?+t:+new Date(+t)}function sr(t,n,e,i,r,o,a,s,c){var u=En(kn,kn),l=u.invert,h=u.domain,p=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),_=c("%Y"),b=[[a,1,Qi],[a,5,5e3],[a,15,15e3],[a,30,3e4],[o,1,tr],[o,5,3e5],[o,15,9e5],[o,30,18e5],[r,1,nr],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,er],[i,2,1728e5],[e,1,6048e5],[n,1,ir],[n,3,7776e6],[t,1,rr]];function M(s){return(a(s)<s?p:o(s)<s?d:r(s)<s?m:i(s)<s?g:n(s)<s?e(s)<s?v:y:t(s)<s?x:_)(s)}function k(n,e,i,r){if(null==n&&(n=10),"number"==typeof n){var o=Math.abs(i-e)/n,a=f((function(t){return t[2]})).right(b,o);a===b.length?(r=w(e/rr,i/rr,n),n=t):a?(r=(a=b[o/b[a-1][2]<b[a][2]/o?a-1:a])[1],n=a[0]):(r=Math.max(w(e,i,n),1),n=s)}return null==r?n:n.every(r)}return u.invert=function(t){return new Date(l(t))},u.domain=function(t){return arguments.length?h(I.call(t,ar)):h().map(or)},u.ticks=function(t,n){var e,i=h(),r=i[0],o=i[i.length-1],a=o<r;return a&&(e=r,r=o,o=e),e=(e=k(t,r,o,n))?e.range(r,o+1):[],a?e.reverse():e},u.tickFormat=function(t,n){return null==n?M:c(n)},u.nice=function(t,n){var e=h();return(t=k(t,e[0],e[e.length-1],n))?h(function(t,n){var e,i=0,r=(t=t.slice()).length-1,o=t[i],a=t[r];return a<o&&(e=i,i=r,r=e,e=o,o=a,a=e),t[i]=n.floor(o),t[r]=n.ceil(a),t}(e,t)):u},u.copy=function(){return Hn(u,sr(t,n,e,i,r,o,a,s,c))},u}function cr(){return D.apply(sr(xe,we,me,pe,fe,he,le,re,$e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var ur=Math.PI,lr=2*ur,hr=1e-6,fr=lr-hr;function pr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function dr(){return new pr}function mr(t){return function(){return t}}function gr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function vr(t){this._context=t}function yr(t){return new vr(t)}function wr(t){return t[0]}function xr(t){return t[1]}function _r(t,n){var e=mr(!0),i=null,r=yr,o=null;function a(a){var s,c,u,l=(a=gr(a)).length,h=!1;for(null==i&&(o=r(u=dr())),s=0;s<=l;++s)!(s<l&&e(c=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,a),+n(c,s,a));if(u)return o=null,u+""||null}return t="function"==typeof t?t:void 0===t?wr:mr(t),n="function"==typeof n?n:void 0===n?xr:mr(n),a.x=function(n){return arguments.length?(t="function"==typeof n?n:mr(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:mr(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:mr(!!t),a):e},a.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),a):i},a}function br(t,n,e){var i=null,r=mr(!0),o=null,a=yr,s=null;function c(c){var u,l,h,f,p,d=(c=gr(c)).length,m=!1,g=new Array(d),v=new Array(d);for(null==o&&(s=a(p=dr())),u=0;u<=d;++u){if(!(u<d&&r(f=c[u],u,c))===m)if(m=!m)l=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=l;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[u]=+t(f,u,c),v[u]=+n(f,u,c),s.point(i?+i(f,u,c):g[u],e?+e(f,u,c):v[u]))}if(p)return s=null,p+""||null}function u(){return _r().defined(r).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?wr:mr(+t),n="function"==typeof n?n:mr(void 0===n?0:+n),e="function"==typeof e?e:void 0===e?xr:mr(+e),c.x=function(n){return arguments.length?(t="function"==typeof n?n:mr(+n),i=null,c):t},c.x0=function(n){return arguments.length?(t="function"==typeof n?n:mr(+n),c):t},c.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:mr(+t),c):i},c.y=function(t){return arguments.length?(n="function"==typeof t?t:mr(+t),e=null,c):n},c.y0=function(t){return arguments.length?(n="function"==typeof t?t:mr(+t),c):n},c.y1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:mr(+t),c):e},c.lineX0=c.lineY0=function(){return u().x(t).y(n)},c.lineY1=function(){return u().x(t).y(e)},c.lineX1=function(){return u().x(i).y(n)},c.defined=function(t){return arguments.length?(r="function"==typeof t?t:mr(!!t),c):r},c.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),c):o},c}function Mr(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function kr(t){this._context=t}function Sr(t){return new kr(t)}function Tr(t){return t<1e3?t.toString():Xn(",.1",1e3)(t)}pr.prototype=dr.prototype={constructor:pr,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,r,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,n,e,i,r){t=+t,n=+n,e=+e,i=+i,r=+r;var o=this._x1,a=this._y1,s=e-t,c=i-n,u=o-t,l=a-n,h=u*u+l*l;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(h>hr)if(Math.abs(l*s-c*u)>hr&&r){var f=e-o,p=i-a,d=s*s+c*c,m=f*f+p*p,g=Math.sqrt(d),v=Math.sqrt(h),y=r*Math.tan((ur-Math.acos((d+h-m)/(2*g*v)))/2),w=y/v,x=y/g;Math.abs(w-1)>hr&&(this._+="L"+(t+w*u)+","+(n+w*l)),this._+="A"+r+","+r+",0,0,"+ +(l*f>u*p)+","+(this._x1=t+x*s)+","+(this._y1=n+x*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,i,r,o){t=+t,n=+n;var a=(e=+e)*Math.cos(i),s=e*Math.sin(i),c=t+a,u=n+s,l=1^o,h=o?i-r:r-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>hr||Math.abs(this._y1-u)>hr)&&(this._+="L"+c+","+u),e&&(h<0&&(h=h%lr+lr),h>fr?this._+="A"+e+","+e+",0,1,"+l+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):h>hr&&(this._+="A"+e+","+e+",0,"+ +(h>=ur)+","+l+","+(this._x1=t+e*Math.cos(r))+","+(this._y1=n+e*Math.sin(r))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}},vr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}},kr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mr(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mr(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};var Cr="http://www.w3.org/1999/xhtml",Lr={svg:"http://www.w3.org/2000/svg",xhtml:Cr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hr(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Lr.hasOwnProperty(n)?{space:Lr[n],local:t}:t}function Ar(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Cr&&n.documentElement.namespaceURI===Cr?n.createElement(t):n.createElementNS(e,t)}}function Er(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Nr(t){var n=Hr(t);return(n.local?Er:Ar)(n)}function Ur(){}function $r(t){return null==t?Ur:function(){return this.querySelector(t)}}function qr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function jr(){return[]}function zr(t){return null==t?jr:function(){return this.querySelectorAll(t)}}function Pr(t){return function(){return this.matches(t)}}function Dr(t){return function(n){return n.matches(t)}}var Yr=Array.prototype.find;function Fr(){return this.firstElementChild}var Rr=Array.prototype.filter;function Xr(){return this.children}function Br(t){return new Array(t.length)}function Wr(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function Ir(t){return function(){return t}}function Or(t,n,e,i,r,o){for(var a,s=0,c=n.length,u=o.length;s<u;++s)(a=n[s])?(a.__data__=o[s],i[s]=a):e[s]=new Wr(t,o[s]);for(;s<c;++s)(a=n[s])&&(r[s]=a)}function Vr(t,n,e,i,r,o,a){var s,c,u,l=new Map,h=n.length,f=o.length,p=new Array(h);for(s=0;s<h;++s)(c=n[s])&&(p[s]=u=a.call(c,c.__data__,s,n)+"",l.has(u)?r[s]=c:l.set(u,c));for(s=0;s<f;++s)u=a.call(t,o[s],s,o)+"",(c=l.get(u))?(i[s]=c,c.__data__=o[s],l.delete(u)):e[s]=new Wr(t,o[s]);for(s=0;s<h;++s)(c=n[s])&&l.get(p[s])===c&&(r[s]=c)}function Gr(t){return t.__data__}function Zr(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Jr(t){return function(){this.removeAttribute(t)}}function Kr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,n){return function(){this.setAttribute(t,n)}}function to(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function no(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function eo(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function io(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ro(t){return function(){this.style.removeProperty(t)}}function oo(t,n,e){return function(){this.style.setProperty(t,n,e)}}function ao(t,n,e){return function(){var i=n.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function so(t,n){return t.style.getPropertyValue(n)||io(t).getComputedStyle(t,null).getPropertyValue(n)}function co(t){return function(){delete this[t]}}function uo(t,n){return function(){this[t]=n}}function lo(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function ho(t){return t.trim().split(/^|\s+/)}function fo(t){return t.classList||new po(t)}function po(t){this._node=t,this._names=ho(t.getAttribute("class")||"")}function mo(t,n){for(var e=fo(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function go(t,n){for(var e=fo(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function vo(t){return function(){mo(this,t)}}function yo(t){return function(){go(this,t)}}function wo(t,n){return function(){(n.apply(this,arguments)?mo:go)(this,t)}}function xo(){this.textContent=""}function _o(t){return function(){this.textContent=t}}function bo(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function Mo(){this.innerHTML=""}function ko(t){return function(){this.innerHTML=t}}function So(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function To(){this.nextSibling&&this.parentNode.appendChild(this)}function Co(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Lo(){return null}function Ho(){var t=this.parentNode;t&&t.removeChild(this)}function Ao(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Eo(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function No(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Uo(t){return function(){var n=this.__on;if(n){for(var e,i=0,r=-1,o=n.length;i<o;++i)e=n[i],t.type&&e.type!==t.type||e.name!==t.name?n[++r]=e:this.removeEventListener(e.type,e.listener,e.options);++r?n.length=r:delete this.__on}}}function $o(t,n,e){return function(){var i,r=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(r)for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),void(i.value=n);this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function qo(t,n,e){var i=io(t),r=i.CustomEvent;"function"==typeof r?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function jo(t,n){return function(){return qo(this,t,n)}}function zo(t,n){return function(){return qo(this,t,n.apply(this,arguments))}}Wr.prototype={constructor:Wr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},po.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Po=[null];function Do(t,n){this._groups=t,this._parents=n}function Yo(){return new Do([[document.documentElement]],Po)}function Fo(t){return"string"==typeof t?new Do([[document.querySelector(t)]],[document.documentElement]):new Do([[t]],Po)}function Ro(t,n){if(t=function(t){let n;for(;n=t.sourceEvent;)t=n;return t}(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(n.getScreenCTM().inverse())).x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}Do.prototype=Yo.prototype={constructor:Do,select:function(t){"function"!=typeof t&&(t=$r(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o,a,s=n[r],c=s.length,u=i[r]=new Array(c),l=0;l<c;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),u[l]=a);return new Do(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);return null==n?[]:qr(n)}}(t):zr(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var a,s=n[o],c=s.length,u=0;u<c;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),r.push(a));return new Do(i,r)},selectChild:function(t){return this.select(null==t?Fr:function(t){return function(){return Yr.call(this.children,t)}}("function"==typeof t?t:Dr(t)))},selectChildren:function(t){return this.selectAll(null==t?Xr:function(t){return function(){return Rr.call(this.children,t)}}("function"==typeof t?t:Dr(t)))},filter:function(t){"function"!=typeof t&&(t=Pr(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o,a=n[r],s=a.length,c=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&c.push(o);return new Do(i,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,Gr);var e=n?Vr:Or,i=this._parents,r=this._groups;"function"!=typeof t&&(t=Ir(t));for(var o=r.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var l=i[u],h=r[u],f=h.length,p=qr(t.call(l,l&&l.__data__,u,i)),d=p.length,m=s[u]=new Array(d),g=a[u]=new Array(d),v=c[u]=new Array(f);e(l,h,m,g,v,p,n);for(var y,w,x=0,_=0;x<d;++x)if(y=m[x]){for(x>=_&&(_=x+1);!(w=g[_])&&++_<d;);y._next=w||null}}return(a=new Do(a,i))._enter=s,a._exit=c,a},enter:function(){return new Do(this._enter||this._groups.map(Br),this._parents)},exit:function(){return new Do(this._exit||this._groups.map(Br),this._parents)},join:function(t,n,e){var i=this.enter(),r=this,o=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=n&&(r=n(r)),null==e?o.remove():e(o),i&&r?i.merge(r).order():r},merge:function(t){if(!(t instanceof Do))throw new Error("invalid merge");for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var c,u=n[s],l=e[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(c=u[p]||l[p])&&(f[p]=c);for(;s<i;++s)a[s]=n[s];return new Do(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i,r=t[n],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=Zr);for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var a,s=e[o],c=s.length,u=r[o]=new Array(c),l=0;l<c;++l)(a=s[l])&&(u[l]=a);u.sort(n)}return new Do(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r,o=n[e],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,n){var e=Hr(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((null==n?e.local?Kr:Jr:"function"==typeof n?e.local?eo:no:e.local?to:Qr)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?ro:"function"==typeof n?ao:oo)(t,n,null==e?"":e)):so(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?co:"function"==typeof n?lo:uo)(t,n)):this.node()[t]},classed:function(t,n){var e=ho(t+"");if(arguments.length<2){for(var i=fo(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each(("function"==typeof n?wo:n?vo:yo)(e,n))},text:function(t){return arguments.length?this.each(null==t?xo:("function"==typeof t?bo:_o)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Mo:("function"==typeof t?So:ko)(t)):this.node().innerHTML},raise:function(){return this.each(To)},lower:function(){return this.each(Co)},append:function(t){var n="function"==typeof t?t:Nr(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:Nr(t),i=null==n?Lo:"function"==typeof n?n:$r(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(Ho)},clone:function(t){return this.select(t?Eo:Ao)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var i,r,o=No(t+""),a=o.length;if(!(arguments.length<2)){for(s=n?$o:Uo,i=0;i<a;++i)this.each(s(o[i],n,e));return this}var s=this.node().__on;if(s)for(var c,u=0,l=s.length;u<l;++u)for(i=0,c=s[u];i<a;++i)if((r=o[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?zo:jo)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i,r=t[n],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};var Xo={value:function(){}};function Bo(){for(var t,n=0,e=arguments.length,i={};n<e;++n){if(!(t=arguments[n]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new Wo(i)}function Wo(t){this._=t}function Io(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function Oo(t,n){for(var e,i=0,r=t.length;i<r;++i)if((e=t[i]).name===n)return e.value}function Vo(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=Xo,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=e&&t.push({name:n,value:e}),t}Wo.prototype=Bo.prototype={constructor:Wo,on:function(t,n){var e,i=this._,r=Io(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++o<a;)if(e=(t=r[o]).type)i[e]=Vo(i[e],t.name,n);else if(null==n)for(e in i)i[e]=Vo(i[e],t.name,null);return this}for(;++o<a;)if((e=(t=r[o]).type)&&(e=Oo(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Wo(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,i,r=new Array(e),o=0;o<e;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(i=this._[t]).length;o<e;++o)i[o].value.apply(n,r)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};var Go,Zo,Jo=0,Ko=0,Qo=0,ta=0,na=0,ea=0,ia="object"==typeof performance&&performance.now?performance:Date,ra="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function oa(){return na||(ra(aa),na=ia.now()+ea)}function aa(){na=0}function sa(){this._call=this._time=this._next=null}function ca(t,n,e){var i=new sa;return i.restart(t,n,e),i}function ua(){na=(ta=ia.now())+ea,Jo=Ko=0;try{!function(){oa(),++Jo;for(var t,n=Go;n;)(t=na-n._time)>=0&&n._call.call(null,t),n=n._next;--Jo}()}finally{Jo=0,function(){var t,n,e=Go,i=1/0;for(;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Go=n);Zo=t,ha(i)}(),na=0}}function la(){var t=ia.now(),n=t-ta;n>1e3&&(ea-=n,ta=t)}function ha(t){if(!Jo){Ko&&(Ko=clearTimeout(Ko));var n=t-na;n>24?(t<1/0&&(Ko=setTimeout(ua,n)),Qo&&(Qo=clearInterval(Qo))):(Qo||(ta=na,Qo=setInterval(la,1e3)),Jo=1,ra(ua))}}function fa(t,n,e){var i=new sa;return n=null==n?0:+n,i.restart((function(e){i.stop(),t(e+n)}),n,e),i}sa.prototype=ca.prototype={constructor:sa,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?oa():+e)+(null==n?0:+n),this._next||Zo===this||(Zo?Zo._next=this:Go=this,Zo=this),this._call=t,this._time=e,ha()},stop:function(){this._call&&(this._call=null,this._time=1/0,ha())}};var pa=Bo("start","end","cancel","interrupt"),da=[];function ma(t,n,e,i,r,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var i,r=t.__transition;function o(t){e.state=1,e.timer.restart(a,e.delay,e.time),e.delay<=t&&a(t-e.delay)}function a(o){var u,l,h,f;if(1!==e.state)return c();for(u in r)if((f=r[u]).name===e.name){if(3===f.state)return fa(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(fa((function(){3===e.state&&(e.state=4,e.timer.restart(s,e.delay,e.time),s(o))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,i=new Array(h=e.tween.length),u=0,l=-1;u<h;++u)(f=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(i[++l]=f);i.length=l+1}}function s(n){for(var r=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(c),e.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){for(var i in e.state=6,e.timer.stop(),delete r[n],r)return;delete t.__transition}r[n]=e,e.timer=ca(o,0,e.time)}(t,e,{name:n,index:i,group:r,on:pa,tween:da,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function ga(t,n){var e=ya(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function va(t,n){var e=ya(t,n);if(e.state>3)throw new Error("too late; already running");return e}function ya(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function wa(t,n){var e,i,r,o=t.__transition,a=!0;if(o){for(r in n=null==n?null:n+"",o)(e=o[r]).name===n?(i=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(i?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[r]):a=!1;a&&delete t.__transition}}function xa(t,n){var e,i;return function(){var r=va(this,t),o=r.tween;if(o!==e)for(var a=0,s=(i=e=o).length;a<s;++a)if(i[a].name===n){(i=i.slice()).splice(a,1);break}r.tween=i}}function _a(t,n,e){var i,r;if("function"!=typeof e)throw new Error;return function(){var o=va(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:n,value:e},c=0,u=r.length;c<u;++c)if(r[c].name===n){r[c]=s;break}c===u&&r.push(s)}o.tween=r}}function ba(t,n,e){var i=t._id;return t.each((function(){var t=va(this,i);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return ya(t,i).value[n]}}function Ma(t,n){var e;return("number"==typeof n?nn:n instanceof dt?Kt:(e=dt(n))?(n=e,Kt):an)(t,n)}function ka(t){return function(){this.removeAttribute(t)}}function Sa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ta(t,n,e){var i,r,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=n(i=a,e)}}function Ca(t,n,e){var i,r,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=n(i=a,e)}}function La(t,n,e){var i,r,o;return function(){var a,s,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(s=c+"")?null:a===i&&s===r?o:(r=s,o=n(i=a,c));this.removeAttribute(t)}}function Ha(t,n,e){var i,r,o;return function(){var a,s,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:a===i&&s===r?o:(r=s,o=n(i=a,c));this.removeAttributeNS(t.space,t.local)}}function Aa(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function Ea(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Na(t,n){var e,i;function r(){var r=n.apply(this,arguments);return r!==i&&(e=(i=r)&&Ea(t,r)),e}return r._value=n,r}function Ua(t,n){var e,i;function r(){var r=n.apply(this,arguments);return r!==i&&(e=(i=r)&&Aa(t,r)),e}return r._value=n,r}function $a(t,n){return function(){ga(this,t).delay=+n.apply(this,arguments)}}function qa(t,n){return n=+n,function(){ga(this,t).delay=n}}function ja(t,n){return function(){va(this,t).duration=+n.apply(this,arguments)}}function za(t,n){return n=+n,function(){va(this,t).duration=n}}function Pa(t,n){if("function"!=typeof n)throw new Error;return function(){va(this,t).ease=n}}function Da(t,n,e){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?ga:va;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(n,e),a.on=r}}var Ya=Yo.prototype.constructor;function Fa(t){return function(){this.style.removeProperty(t)}}function Ra(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function Xa(t,n,e){var i,r;function o(){var o=n.apply(this,arguments);return o!==r&&(i=(r=o)&&Ra(t,o,e)),i}return o._value=n,o}function Ba(t){return function(n){this.textContent=t.call(this,n)}}function Wa(t){var n,e;function i(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Ba(i)),n}return i._value=t,i}var Ia=0;function Oa(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function Va(t){return Yo().transition(t)}function Ga(){return++Ia}var Za=Yo.prototype;function Ja(t){return Math.sqrt(1- --t*t)}Oa.prototype=Va.prototype={constructor:Oa,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=$r(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,c,u=i[a],l=u.length,h=o[a]=new Array(l),f=0;f<l;++f)(s=u[f])&&(c=t.call(s,s.__data__,f,u))&&("__data__"in s&&(c.__data__=s.__data__),h[f]=c,ma(h[f],n,e,f,h,ya(s,e)));return new Oa(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=zr(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var c,u=i[s],l=u.length,h=0;h<l;++h)if(c=u[h]){for(var f,p=t.call(c,c.__data__,h,u),d=ya(c,e),m=0,g=p.length;m<g;++m)(f=p[m])&&ma(f,n,e,m,p,d);o.push(p),a.push(c)}return new Oa(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=Pr(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o,a=n[r],s=a.length,c=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&c.push(o);return new Oa(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var c,u=n[s],l=e[s],h=u.length,f=a[s]=new Array(h),p=0;p<h;++p)(c=u[p]||l[p])&&(f[p]=c);for(;s<i;++s)a[s]=n[s];return new Oa(a,this._parents,this._name,this._id)},selection:function(){return new Ya(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Ga(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],c=s.length,u=0;u<c;++u)if(a=s[u]){var l=ya(a,n);ma(a,t,e,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Oa(i,this._parents,t,e)},call:Za.call,nodes:Za.nodes,node:Za.node,size:Za.size,empty:Za.empty,each:Za.each,on:function(t,n){var e=this._id;return arguments.length<2?ya(this.node(),e).on.on(t):this.each(Da(e,t,n))},attr:function(t,n){var e=Hr(t),i="transform"===e?yn:Ma;return this.attrTween(t,"function"==typeof n?(e.local?Ha:La)(e,i,ba(this,"attr."+t,n)):null==n?(e.local?Sa:ka)(e):(e.local?Ca:Ta)(e,i,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var i=Hr(t);return this.tween(e,(i.local?Na:Ua)(i,n))},style:function(t,n,e){var i="transform"==(t+="")?vn:Ma;return null==n?this.styleTween(t,function(t,n){var e,i,r;return function(){var o=so(this,t),a=(this.style.removeProperty(t),so(this,t));return o===a?null:o===e&&a===i?r:r=n(e=o,i=a)}}(t,i)).on("end.style."+t,Fa(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var i,r,o;return function(){var a=so(this,t),s=e(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=so(this,t)),a===c?null:a===i&&c===r?o:(r=c,o=n(i=a,s))}}(t,i,ba(this,"style."+t,n))).each(function(t,n){var e,i,r,o,a="style."+n,s="end."+a;return function(){var c=va(this,t),u=c.on,l=null==c.value[a]?o||(o=Fa(n)):void 0;u===e&&r===l||(i=(e=u).copy()).on(s,r=l),c.on=i}}(this._id,t)):this.styleTween(t,function(t,n,e){var i,r,o=e+"";return function(){var a=so(this,t);return a===o?null:a===i?r:r=n(i=a,e)}}(t,i,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw new Error;return this.tween(i,Xa(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ba(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,Wa(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i,r=ya(this.node(),e).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==n?xa:_a)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?$a:qa)(n,t)):ya(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?ja:za)(n,t)):ya(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(Pa(n,t)):ya(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;va(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,i=e._id,r=e.size();return new Promise((function(o,a){var s={value:a},c={value:function(){0==--r&&o()}};e.each((function(){var e=va(this,i),r=e.on;r!==t&&((n=(t=r).copy())._.cancel.push(s),n._.interrupt.push(s),n._.end.push(c)),e.on=n})),0===r&&o()}))},[Symbol.iterator]:Za[Symbol.iterator]};var Ka=function t(n){function e(t){return--t*t*((t+1)*n+t)+1}return n=+n,e.overshoot=t,e}(1.70158),Qa=2*Math.PI,ts=function t(n,e){var i=Math.asin(1/(n=Math.max(1,n)))*(e/=Qa);function r(t){return 1-n*function(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}(t=+t)*Math.sin((t+i)/e)}return r.amplitude=function(n){return t(n,e*Qa)},r.period=function(e){return t(n,e)},r}(1,.3),ns={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function es(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Yo.prototype.interrupt=function(t){return this.each((function(){wa(this,t)}))},Yo.prototype.transition=function(t){var n,e;t instanceof Oa?(n=t._id,t=t._name):(n=Ga(),(e=ns).time=oa(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],c=s.length,u=0;u<c;++u)(a=s[u])&&ma(a,t,n,u,s,e||es(a,n));return new Oa(i,this._parents,t,n)};const is=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rs=["January","February","March","April","May","June","July","August","September","October","November","December"];function os(){const t=function(){const t=document.createElement("div");return t.style.position="absolute",t.style.top="0",t.style.opacity="0",t.style.pointerEvents="none",t.style.boxSizing="border-box",t}();let n=null,e=null;function i(){return[0,0]}function r(){return" "}function o(i){n=function(t){const n=t.node();return"svg"===n.tagName.toLowerCase()?n:n.ownerSVGElement}(i),e=n.createSVGPoint(),document.body.appendChild(t)}return o.show=function(n,a){const s=r(a),c=i(a),u=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.scrollLeft||document.body.scrollLeft;t.innerHTML=s,t.style.opacity="1",t.style.pointerEvents="all";const h=function(t,n,e){const i=function(t,n){let e=t;for(;void 0===e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;const i={},r=e.getScreenCTM(),o=e.getBBox(),a=o.width,s=o.height,c=o.x,u=o.y;return n.x=c,n.y=u,i.nw=n.matrixTransform(r),n.x+=a,i.ne=n.matrixTransform(r),n.y+=s,i.se=n.matrixTransform(r),n.x-=a,i.sw=n.matrixTransform(r),n.y-=s/2,i.w=n.matrixTransform(r),n.x+=a,i.e=n.matrixTransform(r),n.x-=a/2,n.y-=s/2,i.n=n.matrixTransform(r),n.y+=s,i.s=n.matrixTransform(r),i}(e,t);return{top:i.n.y-n.offsetHeight,left:i.n.x-n.offsetWidth/2}}(e,t,n.target);return t.classList.toggle("n",!0),t.style.top=h.top+c[0]+u+"px",t.style.left=h.left+c[1]+l+"px",o},o.hide=function(){return t.style.opacity="0",t.style.pointerEvents="none",o},o.attr=function(n,e){return Yo.prototype.attr.apply(Fo(t),[n,e]),o},o.offset=function(t){return i=function(){return t},o},o.html=function(t){return r=t,o},o}function as(t,n){const e=document.querySelector("#commit-activity-master"),i=document.querySelector("#commit-activity-detail");let r=260;const o=i.clientWidth;let a=0,s=null;!function(){let t,e,c,u=0;for(t=e=0,c=n.length;e<c;t=++e){0!==n[t].total&&(u=t),n[t].index=t}a=u;const[l,h,f,p]=[20,30,30,40];let d=n[a].days,m=x(n,(function(t){return x(t.days)}));const g=Gn().domain([0,d.length-1]).range([0,o-h-f]),v=Gn().domain([0,m]).range([r,0]),y=P(v).ticks(5).tickSize(-o+f+h),w=Fo(i).data([d]).append("svg").attr("viewBox",`0 0 ${o} ${r+l+p}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${h},${l})`);w.append("g").attr("class","y axis").call(y);w.append("g").attr("class","axis").selectAll(".day").data(is).enter().append("g").attr("class","day").attr("transform",(function(t,n){return`translate(${g(n)}, ${r})`})).append("text").attr("text-anchor","middle").attr("dy","2em").text((function(t){return t}));const _=_r().x((function(t,n){return g(n)})).y(v);w.append("path").attr("class","path").attr("d",_);const M=w.selectAll("g.dot").data(d).enter().append("g").attr("class","dot").attr("transform",(function(t,n){return`translate(${g(n)}, ${v(t)})`}));M.append("circle").attr("r",4),M.append("text").attr("text-anchor","middle").attr("class","tip").attr("dy",-10).text((function(t){return t})),s=function(t){if(t.index.index>=52||t.index.index<0)return;a=t.index.index,d=n[t.index.index].days,m=x(d),g.domain([0,d.length-1]);const e=function(t){const n=document.createElementNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"transform",t);const e=n.transform.baseVal.consolidate().matrix;return[e.e,e.f]}(Fo(function(t){return"string"==typeof t?new Do([document.querySelectorAll(t)],[document.documentElement]):new Do([null==t?[]:qr(t)],Po)}(".bar.mini").attr("class","bar mini").nodes()[a]).attr("class","bar mini active").attr("transform"));return b.transition().ease(Ka).duration(300).attr("transform",`translate(${e[0]+8}, 105)`),w.selectAll(".path").data([d]).transition().duration(500).attr("d",_),w.selectAll("g.dot").data(d).transition().duration(300).attr("transform",(function(t,n){return`translate(${g(n)}, ${v(t)})`})),w.selectAll("text.tip").data(d).text((function(t){return t}))}}();const[c,u,l,h]=[10,30,20,30];r=100;const f=n.map((function(t){return t.total})),p=x(f),d=qe("%m/%d"),m=Z().domain(T(f.length)).rangeRound([0,o-u-l]).padding(.1),g=Gn().domain([0,p]).range([r,0]),v=P(g).ticks(3).tickSize(-o+u+l).tickFormat(Tr),y=z(m).ticks(ye).tickFormat((function(t,e){const i=new Date(1e3*n[e].week);return d(i)})),w=os().attr("class","svg-tip").offset([-10,0]).html((function(t){const n=new Date(1e3*t.week),e=`${rs[n.getUTCMonth()].slice(0,3)} ${n.getUTCDate()}`;return`<strong>${t.total}</strong> ${1===t.total?"commit":"commits"} the week of ${e}`})),_=Fo(e).append("svg").attr("viewBox",`0 0 ${o+(u+l)} ${r+c+h}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${u},${c})`).call(w);_.append("g").attr("class","y axis").call(v);_.selectAll("g.mini").data(n).enter().append("g").attr("class",(function(t,n){return n===a?"bar mini active":"bar mini"})).attr("transform",(function(t,n){return`translate(${m(n)}, 0)`})).on("click",(function(t,n){return s&&s({node:this,index:n,data:t})})).append("rect").attr("width",m.bandwidth()).attr("height",(function(t){return r-g(t.total)})).attr("y",(function(t){return g(t.total)})).on("mouseover",w.show).on("mouseout",w.hide),_.append("g").attr("class","x axis").attr("transform",`translate(0,${r})`).call(y).selectAll(".tick").style("display",(function(t,n){return n%3!=0?"none":"block"}));const b=_.append("circle").attr("class","focus").attr("r",8).attr("transform",`translate(${m(a)+m.bandwidth()/2}, ${-r})`);b.transition().ease(ts).duration(1e3).attr("r",2).attr("transform",`translate(${m(a)+m.bandwidth()/2}, ${r+5})`)}function ss(t){t.preventDefault(),t.stopImmediatePropagation()}function cs(t){var n=t.document.documentElement,e=Fo(t).on("dragstart.drag",ss,!0);"onselectstart"in n?e.on("selectstart.drag",ss,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function us(t,n){var e=t.document.documentElement,i=Fo(t).on("dragstart.drag",null);n&&(i.on("click.drag",ss,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}var ls=t=>()=>t;function hs(t,{sourceEvent:n,target:e,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function fs(t){t.stopImmediatePropagation()}function ps(t){t.preventDefault(),t.stopImmediatePropagation()}var ds={name:"drag"},ms={name:"space"},gs={name:"handle"},vs={name:"center"};const{abs:ys,max:ws,min:xs}=Math;function _s(t){return[+t[0],+t[1]]}function bs(t){return[_s(t[0]),_s(t[1])]}var Ms={name:"x",handles:["w","e"].map(As),input:function(t,n){return null==t?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ks={name:"y",handles:["n","s"].map(As),input:function(t,n){return null==t?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ss={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ts={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Cs={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ls={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Hs={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function As(t){return{type:t}}function Es(t){return!t.ctrlKey&&!t.button}function Ns(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Us(){return navigator.maxTouchPoints||"ontouchstart"in this}function $s(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function qs(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function js(){return function(t){var n,e=Ns,i=Es,r=Us,o=!0,a=Bo("start","brush","end"),s=6;function c(n){var e=n.property("__brush",m).selectAll(".overlay").data([As("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ss.overlay).merge(e).each((function(){var t=$s(this).extent;Fo(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),n.selectAll(".selection").data([As("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ss.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=n.selectAll(".handle").data(t.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Ss[t.type]})),n.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){var t=Fo(this),n=$s(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?n[1][0]-s/2:n[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?n[1][1]-s/2:n[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(t,n,e){var i=t.__brush.emitter;return!i||e&&i.clean?new h(t,n,e):i}function h(t,n,e){this.that=t,this.args=n,this.state=t.__brush,this.active=0,this.clean=e}function f(e){if((!n||e.touches)&&i.apply(this,arguments)){var r,a,s,c,h,f,p,d,m,g,v,y=this,w=e.target.__data__.type,x="selection"===(o&&e.metaKey?w="overlay":w)?ds:o&&e.altKey?vs:gs,_=t===ks?null:Ls[w],b=t===Ms?null:Hs[w],M=$s(y),k=M.extent,S=M.selection,T=k[0][0],C=k[0][1],L=k[1][0],H=k[1][1],A=0,E=0,N=_&&b&&o&&e.shiftKey,U=Array.from(e.touches||[e],(t=>{const n=t.identifier;return(t=Ro(t,y)).point0=t.slice(),t.identifier=n,t}));if("overlay"===w){S&&(m=!0);const n=[U[0],U[1]||U[0]];M.selection=S=[[r=t===ks?T:xs(n[0][0],n[1][0]),s=t===Ms?C:xs(n[0][1],n[1][1])],[h=t===ks?L:ws(n[0][0],n[1][0]),p=t===Ms?H:ws(n[0][1],n[1][1])]],U.length>1&&D()}else r=S[0][0],s=S[0][1],h=S[1][0],p=S[1][1];a=r,c=s,f=h,d=p;var $=Fo(y).attr("pointer-events","none"),q=$.selectAll(".overlay").attr("cursor",Ss[w]);wa(y);var j=l(y,arguments,!0).beforestart();if(e.touches)j.moved=P,j.ended=Y;else{var z=Fo(e.view).on("mousemove.brush",P,!0).on("mouseup.brush",Y,!0);o&&z.on("keydown.brush",F,!0).on("keyup.brush",R,!0),cs(e.view)}u.call(y),j.start(e,x.name)}function P(t){for(const n of t.changedTouches||[t])for(const t of U)t.identifier===n.identifier&&(t.cur=Ro(n,y));if(N&&!g&&!v&&1===U.length){const t=U[0];ys(t.cur[0]-t[0])>ys(t.cur[1]-t[1])?v=!0:g=!0}for(const n of U)n.cur&&(n[0]=n.cur[0],n[1]=n.cur[1]);m=!0,ps(t),D(t)}function D(t){const n=U[0],e=n.point0;var i;switch(A=n[0]-e[0],E=n[1]-e[1],x){case ms:case ds:_&&(A=ws(T-r,xs(L-h,A)),a=r+A,f=h+A),b&&(E=ws(C-s,xs(H-p,E)),c=s+E,d=p+E);break;case gs:U[1]?(_&&(a=ws(T,xs(L,U[0][0])),f=ws(T,xs(L,U[1][0])),_=1),b&&(c=ws(C,xs(H,U[0][1])),d=ws(C,xs(H,U[1][1])),b=1)):(_<0?(A=ws(T-r,xs(L-r,A)),a=r+A,f=h):_>0&&(A=ws(T-h,xs(L-h,A)),a=r,f=h+A),b<0?(E=ws(C-s,xs(H-s,E)),c=s+E,d=p):b>0&&(E=ws(C-p,xs(H-p,E)),c=s,d=p+E));break;case vs:_&&(a=ws(T,xs(L,r-A*_)),f=ws(T,xs(L,h+A*_))),b&&(c=ws(C,xs(H,s-E*b)),d=ws(C,xs(H,p+E*b)))}f<a&&(_*=-1,i=r,r=h,h=i,i=a,a=f,f=i,w in Ts&&q.attr("cursor",Ss[w=Ts[w]])),d<c&&(b*=-1,i=s,s=p,p=i,i=c,c=d,d=i,w in Cs&&q.attr("cursor",Ss[w=Cs[w]])),M.selection&&(S=M.selection),g&&(a=S[0][0],f=S[1][0]),v&&(c=S[0][1],d=S[1][1]),S[0][0]===a&&S[0][1]===c&&S[1][0]===f&&S[1][1]===d||(M.selection=[[a,c],[f,d]],u.call(y),j.brush(t,x.name))}function Y(t){if(fs(t),t.touches){if(t.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500)}else us(t.view,m),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),q.attr("cursor",Ss.overlay),M.selection&&(S=M.selection),qs(S)&&(M.selection=null,u.call(y)),j.end(t,x.name)}function F(t){switch(t.keyCode){case 16:N=_&&b;break;case 18:x===gs&&(_&&(h=f-A*_,r=a+A*_),b&&(p=d-E*b,s=c+E*b),x=vs,D());break;case 32:x!==gs&&x!==vs||(_<0?h=f-A:_>0&&(r=a-A),b<0?p=d-E:b>0&&(s=c-E),x=ms,q.attr("cursor",Ss.selection),D());break;default:return}ps(t)}function R(t){switch(t.keyCode){case 16:N&&(g=v=N=!1,D());break;case 18:x===vs&&(_<0?h=f:_>0&&(r=a),b<0?p=d:b>0&&(s=c),x=gs,D());break;case 32:x===ms&&(t.altKey?(_&&(h=f-A*_,r=a+A*_),b&&(p=d-E*b,s=c+E*b),x=vs):(_<0?h=f:_>0&&(r=a),b<0?p=d:b>0&&(s=c),x=gs),q.attr("cursor",Ss[w]),D());break;default:return}ps(t)}}function p(t){l(this,arguments).moved(t)}function d(t){l(this,arguments).ended(t)}function m(){var n=this.__brush||{selection:null};return n.extent=bs(e.apply(this,arguments)),n.dim=t,n}return c.move=function(n,e){n.tween?n.on("start.brush",(function(t){l(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){l(this,arguments).end(t)})).tween("brush",(function(){var n=this,i=n.__brush,r=l(n,arguments),o=i.selection,a=t.input("function"==typeof e?e.apply(this,arguments):e,i.extent),s=sn(o,a);function c(t){i.selection=1===t&&null===a?null:s(t),u.call(n),r.brush()}return null!==o&&null!==a?c:c(1)})):n.each((function(){var n=this,i=arguments,r=n.__brush,o=t.input("function"==typeof e?e.apply(n,i):e,r.extent),a=l(n,i).beforestart();wa(n),r.selection=null===o?null:o,u.call(n),a.start().brush().end()}))},c.clear=function(t){c.move(t,null)},h.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,n){return this.starting?(this.starting=!1,this.emit("start",t,n)):this.emit("brush",t),this},brush:function(t,n){return this.emit("brush",t,n),this},end:function(t,n){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,n)),this},emit:function(n,e,i){var r=Fo(this.that).datum();a.call(n,this.that,new hs(n,{sourceEvent:e,target:c,selection:t.output(this.state.selection),mode:i,dispatch:a}),r)}},c.extent=function(t){return arguments.length?(e="function"==typeof t?t:ls(bs(t)),c):e},c.filter=function(t){return arguments.length?(i="function"==typeof t?t:ls(!!t),c):i},c.touchable=function(t){return arguments.length?(r="function"==typeof t?t:ls(!!t),c):r},c.handleSize=function(t){return arguments.length?(s=+t,c):s},c.keyModifiers=function(t){return arguments.length?(o=!!t,c):o},c.on=function(){var t=a.on.apply(a,arguments);return t===a?c:t},c}(Ms)}function zs(t){return`${rs[t.getUTCMonth()].slice(0,3)} ${t.getUTCDate()}, ${t.getUTCFullYear()}`}function Ps(t){const n=zs(t[0]),e=zs(t[1]);document.querySelector(".js-date-range").textContent=`${n} – ${e}`}const Ds=qe("%Y-%m-%d");function Ys(t){return new Date(1e3*~~t)}function Fs(t,n,e){const i=function(t,n){const[e,i]=n;return t.map((function(t){const n=Object.assign({},t);return n.weeks=n.weeks.filter((t=>t.date>=e&&t.date<=i)),n}))}(t,n);for(const r of i){let t=0,n=0,e=0;for(const i of r.weeks)t+=i.c,n+=i.a,e+=i.d;r.c=t,r.a=n,r.d=e}return i.sort(((t,n)=>function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}(t[e],n[e])))}function Rs(t,n){const e=new URL(window.location.href,window.location.origin),i=new URLSearchParams(e.search);i.set("from",Ds(t[0])),i.set("to",Ds(t[1])),i.set("type",n),e.search=i.toString(),o(null,"",e.toString())}function Xs(){return new URLSearchParams(window.location.search).get("type")||"c"}const Bs=new WeakMap;function Ws(t,n){!function(t){for(const n of t)for(const t of n.weeks)t.date=new Date(1e3*t.w)}(n),1===n[0].weeks.length&&function(t){const n=t[0].weeks[0].date,e=new Date(n.getTime()-6048e5);for(const i of t)i.weeks.unshift({a:0,c:0,d:0,date:e,w:e.getTime()/1e3})}(n);const e=function(t){const n={};for(const e of t)for(const t of e.weeks){let e=n[t.w];e||(e=n[t.w]={c:0,a:0,d:0}),e.c+=t.c,e.a+=t.a,e.d+=t.d}return function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n}(n)}(n),i=function(t,n){const e=new Date;return n>e&&(n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))),[t,n]}(Ys(Number(e[0].key)),Ys(518400+~~e[e.length-1].key)),r=function(){const t=new URLSearchParams(window.location.search),n=t.get("from"),e=t.get("to");if(n&&e)return[new Date(n),new Date(e)]}(),o=r||i,a={data:n,totals:e,fullTimeSpan:i,selectedTimeSpan:o};Bs.set(t,a),Ps(o),Os(t,a),Is(t,a,r)}function Is(t,e,i){const{selectedTimeSpan:r}=e,[o,a]=r,s=document.querySelector("#contributors ol");s&&s.remove();const c=new URLSearchParams(window.location.search).get("type")||"c",u=Fs(e.data,r,c),l=document.createElement("ol"),h=Fo(l).attr("class","contrib-data list-style-none");for(const n of document.querySelectorAll(".contrib-person"))n.remove();const f=t=>t.author.hovercard_url,p=t=>t.author.path,d=t=>t.author.avatar,m=t=>t.author.login,g=document.querySelector(".graphs").getAttribute("data-repo-url")||"",v=document.querySelector("#graphs-contributors-person-item");!function(t,n,e,i,r){const o=new URLSearchParams(window.location.search).get("type")||"c",a=t=>t.date,s=t=>t[o],c={width:e,height:140,margin:{top:10,left:20,right:20,bottom:20},boundedHeight:0,boundedWidth:0};c.boundedHeight=c.height-c.margin.bottom-c.margin.top,c.boundedWidth=c.width-c.margin.left-c.margin.right;const u=x(n,(t=>x(t.weeks,s))),l=cr().domain([i,r]).range([0,c.width]),h=Gn().domain([0,u]).range([c.boundedHeight,0]),f=br().curve(Sr).x((t=>l(a(t)))).y0((()=>c.boundedHeight)).y1((t=>h(s(t)))),p=P(h).ticks(2).tickSize(-c.width).tickPadding(10).tickFormat(Tr),d=z(l);n[0].weeks.length<5&&d.ticks(n[0].weeks.length).tickFormat($e("%x"));const m=t.select("span.Box").append("svg").attr("viewBox",`0 0 ${c.width+(c.margin.left+c.margin.right)} ${c.height+c.margin.top+c.margin.bottom}`).attr("class","capped-card-content").attr("preserveAspectRatio","xMinYMin meet").append("g").attr("transform",`translate(${c.margin.left},${c.margin.top})`);m.append("g").attr("class","x axis").classed("dense",d.ticks()[0]>=10).attr("transform",`translate(0, ${c.boundedHeight})`).call(d).selectAll(".tick text").attr("fill","#6a737d").style("display",((t,n)=>n%3!=0?"none":"block")),m.select(".x.dense text").attr("dx",7);m.append("g").attr("class","y axis").call(p).selectAll(".y.axis g text").attr("fill","#6a737d").attr("dx",c.width/2).style("display",((t,n)=>0===n?"none":"block")).classed("midlabel",!0),m.append("path").attr("d",(t=>f(t.weeks)))}(h.selectAll(".contrib-person").data(u.filter((t=>t[c]))).enter().append(((t,e)=>{const r=new URLSearchParams;r.set("author",m(t)),i&&(r.set("since",Ds(i[0])),r.set("until",Ds(i[1])));const o=new n(v,{hoverCardUrl:f(t),authorUrl:p(t),authorAvatarUrl:d(t),authorLogin:m(t),place:"#"+(e+1),contributorUrl:`${g}/commits?${r.toString()}`,contributorUrlText:`${new Intl.NumberFormat("en-US").format(t.c)} ${1===t.c?"commit":"commits"}`,linesAdded:new Intl.NumberFormat("en-US").format(t.a)+" ++",linesDeleted:new Intl.NumberFormat("en-US").format(t.d)+" --"}).children[0];return(e+1)%2?o.classList.add("pr-2"):o.classList.add("pl-2"),o})),u,parseInt(t.getAttribute("data-graph-width"),10),o,a),t.appendChild(l)}function Os(t,n){const{totals:e,fullTimeSpan:i,selectedTimeSpan:r}=n,[o,a]=i,s={width:t.clientWidth,height:160,margin:{top:20,left:50,right:20,bottom:50},boundedWidth:0,boundedHeight:0};s.boundedWidth=s.width-s.margin.left-s.margin.right,s.boundedHeight=s.height-s.margin.top-s.margin.bottom;const c=new URLSearchParams(window.location.search).get("type")||"c",u=t=>t.value[c],l=cr().domain([o,a]).range([0,s.boundedWidth]),h=Gn().domain([0,x(e,u)]).range([s.height,0]),f=br().curve(Sr).x((t=>l((t=>Ys(parseInt(t.key,10)))(t)))).y0((()=>s.height)).y1((t=>h(u(t))));Fo("#contributors-master svg").remove();const p=Fo("#contributors-master").data([e]).append("svg").attr("viewBox",`0 0 ${s.width} ${s.height+s.margin.top+s.margin.bottom}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${s.margin.left},${s.margin.top})`),d=P(h).ticks(4).tickSize(-s.width+s.margin.left+s.margin.right).tickPadding(10).tickFormat(Tr),m=z().scale(l);e.length<5&&m.ticks(e.length);p.append("g").attr("class","x axis").attr("transform",`translate(0, ${s.height})`).call(m).selectAll(".tick text").attr("fill","#6a737d");p.append("g").attr("class","y axis").call(d).selectAll(".tick text").attr("fill","#6a737d"),p.append("g").append("path").attr("class","area").attr("d",f);const g=js().on("start",(function(){p.classed("selecting",!0)})).on("end",(function(n){const e=new Boolean(n.selection&&n.selection.length),i=n.selection||[];p.classed("selecting",!e);const r=i.map(l.invert);let o=void 0;if(2===r.length){const[t,n]=r;if(!(t instanceof Date))throw new Error("invariant");if(!(n instanceof Date))throw new Error("invariant");o=[t,n]}!function(t,n){const e=Bs.get(t);n&&Ds(n[0])!==Ds(n[1])?e.selectedTimeSpan=n:e.selectedTimeSpan=e.fullTimeSpan,Rs(e.selectedTimeSpan,Xs()),Ps(e.selectedTimeSpan),Is(t,e,n)}(t,o)})).extent([[0,0],[s.width-(s.margin.left+s.margin.right),s.height]]),v=p.append("g").attr("class","selection").call(g);Ds(r[0])===Ds(o)&&Ds(r[1])===Ds(a)||v.call(g.move,r.map(l))}function Vs(t){return Rn(",")(t)}t("details-menu-selected",".js-contribution-menu",(function(t){const n=t.detail.relatedTarget,e=document.querySelector(".js-graph"),i=Bs.get(e);Xs()!==n.value&&(Rs(i.selectedTimeSpan,n.value),Os(e,i),Is(e,i))}),{capture:!0});const Gs=20,Zs=40,Js=30,Ks=40;function Qs(t,n){t<0?(n.classList.add("is-decrease"),n.querySelector(".js-change-num").textContent=Vs(Math.abs(t))+"% decrease"):t>0?(n.classList.add("is-increase"),n.querySelector(".js-change-num").textContent=Vs(Math.abs(t))+"% increase"):0===t&&(n.querySelector(".js-change-num").textContent=Vs(Math.abs(t))+"% increase")}function tc(t){return Rn(",")(t)}function nc(t,n,e,i){const r=qe("%A, %B %-d, %Y");return os().attr("class","svg-tip web-views comparison").offset([-10,0]).html((o=>{const a=1===o.total?t:n,s=1===o.unique?e:i;return`<span class='title'>${r(o.date)}</span> <ul class='web-views'> <li class='totals metric-0'><strong>${tc(o.total)}</strong> ${a}</li> <li class='uniques metric-1'><strong>${tc(o.unique)}</strong> ${s}</li> </ul>`}))}function ec(t,n,e,i){const r=i.margin,o=i.width-r.left-r.right,a=i.height-r.top-r.bottom;if(!n||null!=n.error)return;const s=function(){return D.apply(sr(He,Le,Se,Me,be,_e,le,re,qe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}().range([0,o]);let c=Gn().range([a,0]);const u=Gn().range([a,0]),l=qe("%m/%d"),p=z(s).ticks(n.counts.length).tickSize(a+5).tickPadding(10).tickFormat(l);let m=P(c).ticks(3).tickFormat(Tr);const g=_r().x((t=>s(t.key))).y((t=>c(t.value))),v=Fo(t).select(".js-graph").append("svg").attr("viewBox",`0 0 ${o+r.left+r.right} ${a+r.top+r.bottom}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz").append("g").attr("transform",`translate(${r.left},${r.top})`).call(e),y=n.counts;for(const h of y)h.date=new Date(1e3*h.bucket);y.sort(((t,n)=>h(t.date,n.date)));const w=f((t=>t.date)).left;const _=y.map((t=>({key:t.date,value:t.total}))),b=y.map((t=>({key:t.date,value:t.unique}))),M=[_,b],[S,T]=d(y,(t=>t.date.getTime())),C=d(_,(t=>t.value))[1],L=x(b,(t=>t.value))+k(b,.5,(t=>t.value));s.domain([S,T]),c.domain([0,C]),u.domain([0,L]);const H=n.summary.total,A=t.querySelector(".js-traffic-total");A&&(A.textContent=tc(H));const E=n.summary.unique,N=t.querySelector(".js-traffic-uniques");N&&(N.textContent=tc(E)),v.append("g").attr("class","x axis").call(p),v.append("g").attr("class","y axis views").call(m),v.selectAll("path.path").data(M).enter().append("path").attr("class",((t,n)=>"path "+(0===n?"total":"unique"))).attr("d",((t,n)=>0===n?g(t):g.y((t=>u(t.value)))(t)));v.selectAll("g.dots").data(M).enter().append("g").attr("class",((t,n)=>0===n?"dots totals":"dots uniques")).each((function(t,n){const e=Fo(this);return 1===n&&(c=u),e.selectAll("circle").data((t=>t)).enter().append("circle").attr("cx",(t=>s(t.key))).attr("cy",(t=>c(t.value))).attr("r",4)})),m=j(u).ticks(3).tickFormat(Tr),v.append("g").attr("class","y axis unique").attr("transform",`translate(${o}, 0)`).call(m),v.append("rect").attr("class","overlay").attr("width",o).attr("height",a).on("mousemove",(function(t){let n;const i=s.invert(Ro(t)[0]),r=w(y,i,1),o=y[r-1],a=y[r];if(o&&a){const t=i-o.date>a.date-i?a:o;return n=v.selectAll("g.dots circle").filter((n=>n.key===t.date)),n=n.nodes(),n.sort(((t,n)=>Number(t.getAttribute("cy"))-Number(n.getAttribute("cy")))),e.show.call(this,{target:n[0]},t)}})).on("mouseout",(function(){setTimeout(e.hide,500)}))}const ic=20,rc=40,oc=30,ac=40,sc=Rn(","),cc=$e("%A, %B %-d, %Y"),uc=$e("%b"),lc=$e("%a %-d"),hc=$e("%-d");function fc(t){return window.innerWidth<768?hc(t):lc(t)}const pc={year:{forTooltip:t=>"Week of "+cc(t),forGraphTick:function(t){let n=uc(t);return window.innerWidth<768&&(n=n[0]),n},ticks:we.every(1)},month:{forTooltip:cc,forGraphTick:fc,ticks:pe.filter((t=>pe.count(0,t)%4==0))},week:{forTooltip:cc,forGraphTick:fc,ticks:pe.every(1)}};function dc(t,n){if(!n||null!=n.error)return;const e=t.closest(".js-org-insights-card"),i=function(t){return pc[t]||pc.month}(n.timespan.period),r=f((t=>t.date)).left,o=function(t){let n=t.clientWidth;if(0===n){const e=t.closest("[hidden]");e instanceof HTMLElement&&(e.hidden=!1,n=t.clientWidth,e.hidden=!0)}return 0===n&&(n=914),n}(t)-rc-ac,a=170;for(const[f,y]of n.metrics.entries()){const t=e.querySelector(`.js-metric[data-metric-index="${f}"] .js-total`);null!=t&&(t.textContent=sc(y.total),s=y.percent_change,c=e.querySelector(`.js-metric[data-metric-index="${f}"] .js-percentage-change`),s<0?c.classList.add("is-decrease","color-text-danger"):s>0?c.classList.add("is-increase","color-text-success"):c.classList.add("color-text-tertiary"),c.querySelector(".js-change-num").textContent=sc(Math.abs(s))+"%")}var s,c;const u=os().attr("class","org-insights-svg-tip total-unique comparison border color-shadow-medium f6 color-bg-primary rounded-1").offset([-10,0]).html((t=>`<p class="f6 color-text-secondary mb-1">${i.forTooltip(t.date)}</p>\n         <ul> ${n.metrics.map(((n,e)=>`<li class="totals metric-${e} d-flex flex-items-center">\n                  <div class="legend mr-1"></div>\n                  <span class="text-bold mr-1">${sc(t[n.display_name])}</span>\n                  ${n.display_name}\n                </li>`)).join("\n")}\n        </ul>`)),l=cr().range([0,o]),h=Gn().range([a,0]),p=z(l).tickSize(175).tickPadding(10).ticks(i.ticks).tickFormat(i.forGraphTick),d=P(h).ticks(3).tickFormat(Tr),m=_r().x((t=>l(t.date))).y((t=>h(t.count))),g=Fo(t).append("svg").attr("width",o+ac+rc).attr("height",a+ic+oc).attr("class","vis").append("g").attr("transform",`translate(${ac},${ic})`).call(u);l.domain([n.timespan.beginning,n.timespan.ending]),h.domain([0,x(n.metrics.map((t=>t.max)))]),g.append("g").attr("class","x axis").call(p).selectAll("text").attr("text-anchor","middle"),g.append("g").attr("class","y axis").call(d);const v=n.metrics.map((t=>t.counts));g.selectAll("path.path").data(v).enter().append("path").attr("class",((t,n)=>"dots total metric-"+(n||0))).attr("d",m);g.selectAll("g.dots").data(v).enter().append("g").attr("class",((t,n)=>"dots totals metric-"+(n||0))).each((function(){Fo(this).selectAll("circle").data((t=>t)).enter().append("circle").attr("cx",(t=>l(t.date))).attr("cy",(t=>h(t.count))).attr("r",2)})),g.append("rect").attr("class","overlay").attr("width",o).attr("height",a).on("mousemove",(function(t){const e={},i=l.invert(Ro(t)[0]),o=n.metrics[0].counts,a=r(o,i,1),s=o[a-1],c=o[a],h=c&&i-s.date>c.date-i?a:a-1,f=o[h];if(f){e.date=f.date;for(const r of n.metrics){const t=r.counts[h];e[r.display_name]=t?t.count:0}const t=Math.max(...n.metrics.map((t=>{const n=t.counts[h];return n?n.count:0})),0),i=g.selectAll("g.dots circle").filter((n=>n&&n.date===e.date&&n.count===t));u.show.call(this,{target:i.node()},e),u.attr("hidden",null)}})).on("mouseout",(function(){setTimeout((()=>{u.hide(),u.attr("hidden","hidden")}),500)})),e.classList.add("is-rendered")}function mc(t){const n=t.querySelector(".js-repo-filter-apply-btn"),e=new URLSearchParams(window.location.search).getAll("repos[]"),i=[];for(const a of t.elements)a instanceof HTMLInputElement&&"repos[]"===a.name&&i.push(a.value);const r=t.querySelector(".js-max-repo-error");if(i.length>3)return r.hidden=!1,void(n.disabled=!0);r.hidden=!0;const o=new Set([...e,...i]);n.disabled=e.length===i.length&&o.size===e.length}function gc(t,n){const e=[];for(const i of t.elements)i instanceof HTMLInputElement&&"repos[]"===i.name&&e.push(i.value);return e.includes(n.toString())}t("loadend",".js-repo-filter",(function(t){const n=t.currentTarget.closest(".js-org-insights-repo-menu"),e=n.querySelectorAll(".js-org-insights-repo-checkbox"),i=n.querySelector(".js-selected-repo-form");for(const r of e)gc(i,r.value)?a(r,!0):a(r,!1)}),{capture:!0}),t("details-menu-selected",".js-org-insights-repo-menu",(function(t){const n=t.currentTarget.closest(".js-org-insights-repo-details"),e=n.querySelector(".js-selected-repo-form"),i=t.detail.relatedTarget.querySelector(".js-org-insights-repo-checkbox");i.checked?function(t,n){const e=t.querySelector(`input[value='${n.value}'][name='repos[]']`);if(e instanceof HTMLInputElement)e.checked=!0;else{const e=n.cloneNode(!0);t.appendChild(e)}mc(t)}(e,i):function(t,n){const e=t.querySelector(`input[value='${n.value}'][name='repos[]']`);e instanceof HTMLInputElement&&e.remove(),mc(t)}(e,i);const r=e.querySelectorAll('input[type="checkbox"]:checked').length,o=n.querySelector(".js-insights-repo-count");o.textContent=0===r?"All":r+" selected"}),{capture:!0});const vc=c((async function(t){const n=await s(t,{headers:{accept:"application/json"}});return await n.json()}));async function yc(t){const n=t.getAttribute("data-url");if(n){for(const n of t.querySelectorAll("svg.viz"))n.remove();t.classList.add("is-graph-loading"),t.classList.remove("is-graph-load-error","is-graph-empty");try{const i=await vc(n);if(!document.contains(t))return;t.classList.remove("is-graph-loading"),null!=i&&i.unusable?t.classList.add("is-graph-without-usable-data"):null!=i&&0===i.length||null!=i&&null!=i.summary&&0===i.summary.total||null!=i[0]&&null!=i[0].weeks&&0===i[0].weeks.length?t.classList.add("is-graph-empty"):function(t,n){switch(t.getAttribute("data-graph-name")){case"code-frequency":!function(t,n){const e=Math.round(t.getBoundingClientRect().width),[i,r,o,a]=[10,10,20,40],s=n.map((t=>[new Date(1e3*t[0]),t[1],t[2]])).sort(((t,n)=>h(t[0],n[0]))),c=s.map((t=>[t[0],t[1]])),u=s.map((t=>[t[0],t[2]])),l=x(c,(t=>t[1])),f=_(u,(t=>t[1]));if(!l||!f)return;const p=s[0][0],d=s[s.length-1][0],m=cr().domain([p,d]).range([0,e-a-r]),g=Gn().domain([f,l]).range([500-o-i,0]),v=z(m).tickFormat((t=>{if(!(t instanceof Date))throw new Error("invariant");if(!(p instanceof Date))throw new Error("invariant");if(!(d instanceof Date))throw new Error("invariant");return p.getFullYear()!==d.getFullYear()?$e("%m/%y")(t):$e("%m/%d")(t)})),y=P(g).tickPadding(5).tickSize(e).tickFormat((t=>{if("number"!=typeof t)throw new Error("invariant");return Tr(Math.abs(t))})),w=br().x((t=>m(t[0]))).y0((t=>g(t[1]))).y1((()=>g(0))),b=Fo(t).append("svg").attr("viewBox",`0 0 ${e} 500`).attr("preserveAspectRatio","xMinYMin meet").attr("class","viz code-frequency").append("g").attr("transform",`translate(${a},${i})`);b.append("g").attr("class","x axis").attr("transform",`translate(0, ${500-i-o})`).call(v).selectAll(".tick text").attr("fill","#6a737d"),b.append("g").attr("class","y axis").attr("transform",`translate(${e}, 0)`).call(y).selectAll(".tick text").attr("fill","#6a737d"),b.selectAll("path.area").data([c,u]).enter().append("path").attr("class",((t,n)=>0===n?"addition":"deletion")).attr("d",w)}(t,n);break;case"commit-activity":as(0,n);break;case"contributors":Ws(t,n);break;case"dashboards-overview":!function(t,n){if(!n||null!=n.error)return;const e=t.closest(".js-dashboards-overview-card"),i=n.timespan.period,r=$e("%A, %B %-d, %Y"),o=f((t=>t.date)).left,a=t.offsetWidth-Zs-Ks,s=150-Gs-Js;for(const[f,x]of n.metrics.entries()){const t=e.querySelector(`.js-metric[data-metric-index="${f}"] .js-total`);null!=t&&(t.textContent=Vs(x.total),c=x.total_change,u=e.querySelector(`.js-metric[data-metric-index="${f}"] .js-total-change`),c<0?u.classList.add("is-decrease"):c>0&&u.classList.add("is-increase"),u.querySelector(".js-change-num").textContent=Vs(Math.abs(c)),Qs(x.percent_change,e.querySelector(`.js-metric[data-metric-index="${f}"] .js-percentage-change`)))}var c,u;if(!n.metrics.some((t=>t.total)))return void e.classList.add("is-no-activity");const l=os().attr("class","svg-tip total-unique comparison").offset([-10,0]).html((function(t){let e,o="";e="year"===i?"Week of "+r(t.date):r(t.date);const a=270/n.metrics.length;for(const[i,r]of n.metrics.entries())o+=`<li class='totals metric-${i}' style='width:${a}px'> <strong>${Vs(t[r.name])}</strong> ${r.display_name} </li>`;return`<span class='title'>${e}</span> <ul> ${o} </ul>`})),h=cr().range([0,a]),p=Gn().range([s,0]);let d,m=1;"year"===i?d=we:"week"===i?(m=1,d=pe):(m=2,d=pe);const g=z(h).tickSize(s+5).tickPadding(10).ticks(d.every(m)).tickFormat((t=>"year"===i?$e("%B")(t):"week"===i&&t.getHours()>=8?"":$e("%a %-d")(t)));let v=P(p).ticks(3).tickFormat(Tr);const y=_r().x((t=>h(t.date))).y((t=>p(t.count))),w=Fo(t).append("svg").attr("width",a+Ks+Zs).attr("height",s+Gs+Js).attr("class","vis").append("g").attr("transform",`translate(${Ks},${Gs})`).call(l);h.domain([n.timespan.beginning,n.timespan.ending]),p.domain([0,x(n.metrics.map((t=>t.max)))]),w.append("g").attr("class","x axis").call(g).selectAll("text").attr("text-anchor","middle"),w.append("g").attr("class","y axis").call(v);const _=n.metrics.map((t=>t.counts));w.selectAll("path.path").data(_).enter().append("path").attr("class",((t,n)=>"dots total metric-"+(n||0))).attr("d",y),w.selectAll("g.dots").data(_).enter().append("g").attr("class",((t,n)=>"dots totals metric-"+(n||0))).each((function(){Fo(this).selectAll("circle").data((t=>t)).enter().append("circle").attr("cx",(t=>h(t.date))).attr("cy",(t=>p(t.count))).attr("r",4)})),v=j(p).ticks(3).tickFormat(Tr),w.append("g").attr("class","y axis unique").attr("transform",`translate(${a}, 0)`).call(v),w.append("rect").attr("class","overlay").attr("width",a).attr("height",s).on("mousemove",(function(t){const e={},i=h.invert(Ro(t)[0]),r=n.metrics[0].counts,a=o(r,i,1),s=r[a-1],c=r[a],u=c&&i-s.date>c.date-i?a:a-1;e.date=r[u].date;for(const o of n.metrics)e[o.name]=o.counts[u].count;const f=w.selectAll("g.dots circle").filter((t=>t.date===e.date));l.show.call(this,{target:f.node()},e)})).on("mouseout",(function(){setTimeout(l.hide,500)}))}(t,n);break;case"org-insights":dc(t,n);break;case"pulse-authors":!function(t,n){const e=n.slice(0,15),i=20,r=0,o=30,a=25,s=Math.round(t.getBoundingClientRect().width)-a-r,c=Math.round(t.getBoundingClientRect().height)-i-o,u=Z().domain(T(15)).rangeRound([0,s]).padding(.2),l=Gn().domain([0,x(e,(t=>t.commits))]).range([c,0]),h=P(l).ticks(3).tickSize(-s).tickFormat((t=>t<1e3?t:Rn(",~s")(t))),f=os().attr("class","svg-tip").offset([-10,0]).html((function(t){const n=t.login||t.name;return`<strong>${t.commits}</strong> ${1===t.commits?"commit":"commits"} authored by <strong>${n}</strong>`})),p=Fo(t).append("svg").attr("class","viz").attr("width",s+a+r).attr("height",c+i+o).append("g").attr("transform",`translate(${a}, ${i})`).call(f);p.append("g").attr("class","y axis").call(h);const d=p.selectAll(".bar").data(e).enter().append("g").attr("class","bar "+t.getAttribute("data-bar-class")).attr("transform",((t,n)=>`translate(${u(n)}, 0)`));d.append("rect").attr("width",u.bandwidth()).attr("height",(t=>c-l(t.commits))).attr("y",(t=>l(t.commits))).on("mouseover",f.show).on("mouseout",f.hide),d.append("a").attr("xlink:href",(function(t){if(null!=t.login)return"/"+t.login})).attr("data-hovercard-type","user").attr("data-hovercard-url",(t=>t.hovercard_url)).append("image").attr("y",c+5).attr("alt",(t=>t.login||"")).attr("xlink:href",(t=>t.gravatar)).attr("width",u.bandwidth()).attr("height",u.bandwidth())}(t,n);break;case"traffic-clones":!function(t,n){const i=nc("clone","clones","unique cloner","unique cloners");e("#js-clones-graph .js-graph",{remove(){i.hide()}}),ec(document.querySelector("#js-clones-graph"),n,i,{width:719,height:243,margin:{top:20,right:40,bottom:30,left:40}})}(0,n);break;case"traffic-visitors":!function(t,n){const i=nc("view","views","unique visitor","unique visitors");e("#js-visitors-graph .js-graph",{remove(){i.hide()}}),ec(document.querySelector("#js-visitors-graph"),n,i,{width:719,height:243,margin:{top:20,right:40,bottom:30,left:40}})}(0,n);break;case"marketplace-insights":!function(t,n){const e=nc("view","views","unique visitor","unique visitors"),i=document.querySelector("#js-marketplace-insights-graph");ec(i,n,e,{width:i.clientWidth,height:i.clientHeight,margin:{top:20,right:40,bottom:30,left:30}})}(0,n);break;case"package-dependencies-security-insights":!function(t,n){const e=10,i=0,r=20,o=30,a=Math.round(t.getBoundingClientRect().width)-o-i,s=Math.round(t.getBoundingClientRect().height)-e-r,c=Z().domain(T(n.length)).rangeRound([0,a]).padding(.2),u=z(c).ticks(n.length).tickFormat((()=>"")),l=Gn().domain([0,x(n,(t=>t.count))+5]).range([s,0]),h=P(l).ticks(3).tickSize(-a).tickFormat((t=>Rn(",~s")(t))),f=Fo(t).append("svg").attr("width",a+o+i).attr("height",s+e+r).append("g").attr("transform",`translate(${o}, ${e})`),p=os().attr("class","svg-tip color-text-white").offset([-10,0]).html((t=>`${new Intl.NumberFormat("en-US").format(t.count)} ${1===t.count?"vulnerability":"vulnerabilities"} affecting ${new Intl.NumberFormat("en-US").format(t.dependents)} ${1===t.dependents?"dependent":"dependents"}`));f.call(p),f.append("g").attr("class","y axis").call(h),f.append("g").attr("class","x axis").attr("transform",`translate(0, ${s})`).call(u);const d=f.selectAll(".bar").data(n).enter().append("g").attr("transform",((t,n)=>`translate(${c(n)}, 0)`)).append("a").attr("class","no-underline").attr("aria-label",(t=>`Filter to ${t.label} severity vulnerabilities`)).attr("xlink:href",(t=>t.url)),m=d.append("rect").attr("class",(t=>"alert-label--"+t.label.toLowerCase())).attr("width",c.bandwidth()).attr("height",(t=>s-l(t.count))).attr("y",(t=>l(t.count))).on("mouseover",p.show).on("mouseout",p.hide);n.find((t=>t.selected))&&m.attr("style",(t=>t.selected?"":"fill-opacity: 0.2")),d.append("text").text((t=>t.label)).attr("class","axis").attr("text-anchor","middle").attr("y",s+16).attr("x",c.bandwidth()/2)}(t,n)}}(t,i)}catch(i){throw t.classList.remove("is-graph-loading"),t.classList.add("is-graph-load-error"),i}}}function wc(t){return getComputedStyle(document.documentElement).getPropertyValue(t)}e(".js-graph",(function(t){yc(t);if("true"===t.getAttribute("data-responsive-graph")){const n=i(yc.bind(null,t),100);return{add(){window.addEventListener("resize",n)},remove(){window.removeEventListener("resize",n)}}}})),e(".js-loading-manifest-dependencies",(function(){!async function(){const t=new URL(window.location.href,window.location.origin),n=new URLSearchParams("polling=true");t.search=n.toString(),await s(t.toString()),window.location.reload()}()}));class Network{constructor(t){this.focus=null,this.container=t,this.minimalHeight=t.offsetHeight,this.width=0,this.height=this.minimalHeight,this.ctx=this.initCanvas(t),this.startLoader("Loading graph data"),this.loadMeta()}redraw(){this.ctx=this.initCanvas(this.container),null!=this.graph&&this.graph.draw(),null!=this.chrome&&this.chrome.draw()}initCanvas(t){const n=t.getElementsByTagName("canvas")[0];this.width=t.offsetWidth,this.height=Math.max(this.minimalHeight,this.height+window.innerHeight-document.body.scrollHeight),n.style.zIndex="0";const e=n.getContext("2d"),i=window.devicePixelRatio||1;return n.width=this.width*i,n.height=this.height*i,n.style.width=this.width+"px",n.style.height=this.height+"px",e.scale(i,i),e}startLoader(t){this.ctx.save(),this.ctx.font="14px 'Helvetica Neue', Arial, sans-serif",this.ctx.fillStyle="#cacaca",this.ctx.textAlign="center",this.ctx.fillText(t,this.width/2,155),this.ctx.restore(),this.displayLoader()}get loader(){return this.container.querySelector(".js-network-graph-loading-area")}stopLoader(){this.loader.hidden=!0}displayLoader(){this.loader.hidden=!1}async loadMeta(){try{const t=this.container.getAttribute("data-network-graph-meta-url"),n=await s(t,{headers:{accept:"application/json"}}),e=await n.json();this.init(e)}catch(t){this.initError()}}init(t){let n,e,i;if(!xc)return;this.focus=t.focus;const r=this.nethash=t.nethash,o=this.spaceMap=t.spacemap,a=this.userBlocks=t.blocks,s=this.commits=function(){const e=t.dates,i=[];for(let t=0;t<e.length;++t)n=e[t],i.push(new Commit(t,n));return i}(),c=this.users={},u=t.users;for(e=0,i=u.length;e<i;e++){const t=u[e];this.users[t.name]=t}const l=this.chrome=new NetworkChrome(this,this.ctx,s,a,c),h=this.graph=new NetworkGraph(this,this.ctx,s,c,o,a,r);this.mouseDriver=new MouseDriver(this.container,l,h),this.keyDriver=new KeyDriver(l,h),this.stopLoader(),h.drawBackground(),l.draw(),h.requestInitialChunk()}initError(){this.stopLoader(),this.ctx.clearRect(0,0,this.width,this.height),this.startLoader("Graph could not be drawn due to a network problem.")}}class Commit{constructor(t,n){this.user=null,this.author=null,this.gravatar=null,this.id=null,this.time=t,this.date=new Date(n),this.requested=!1,this.populated=null,this.message=null,this.space=0,this.parents=[]}populate(t,n,e){this.user=n,this.author=t.author,this.date=new Date(t.date.replace(" ","T")),this.gravatar=t.gravatar,this.id=t.id,this.login=t.login,this.message=t.message,this.space=t.space,this.time=t.time,this.parents=this.populateParents(t.parents,e),this.requested=!0,this.populated=new Date}populateParents(t,n){return t.map((([t,e,i])=>{const r=n[e];return r.id=t,r.space=i,r}))}}class NetworkChrome{constructor(t,n,e,i,r){this.network=t,this.ctx=n,this.commits=e,this.userBlocks=i,this.users=r,this.namesWidth=120,this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.userBgColors=[wc("--color-bg-primary"),wc("--color-bg-tertiary")],this.headerColor=wc("--color-bg-secondary"),this.dividerColor=wc("--color-border-primary"),this.headerHeight=40,this.dateRowHeight=30,this.graphTopOffset=10+this.headerHeight+this.dateRowHeight,this.nameLineHeight=24,this.offsetX=this.namesWidth+(t.width-this.namesWidth)/2-t.focus*this.nameLineHeight,this.offsetY=0,this.contentHeight=this.calcContentHeight(),this.graphMidpoint=this.namesWidth+(t.width-this.namesWidth)/2,this.activeUser=null}moveX(t){this.offsetX+=t,this.offsetX>this.graphMidpoint?this.offsetX=this.graphMidpoint:this.offsetX<this.graphMidpoint-this.commits.length*this.nameLineHeight&&(this.offsetX=this.graphMidpoint-this.commits.length*this.nameLineHeight)}moveY(t){this.offsetY+=t,this.offsetY>0||this.contentHeight<this.network.height-this.graphTopOffset?this.offsetY=0:this.offsetY<-this.contentHeight+this.network.height/2&&(this.offsetY=-this.contentHeight+this.network.height/2)}calcContentHeight(){let t,n,e=0;const i=this.userBlocks;for(t=0,n=i.length;t<n;t++){e+=i[t].count}return e*this.nameLineHeight}hover(t,n){let e,i;const r=this.userBlocks;for(e=0,i=r.length;e<i;e++){const i=r[e];if(t>0&&t<this.namesWidth&&n>this.graphTopOffset+this.offsetY+i.start*this.nameLineHeight&&n<this.graphTopOffset+this.offsetY+(i.start+i.count)*this.nameLineHeight)return this.users[i.name]}return null}draw(){this.drawTimeline(this.ctx),this.drawUsers(this.ctx)}drawTimeline(t){let n,e,i,r,o,a,s,c;for(t.fillStyle=this.headerColor,t.fillRect(0,0,this.network.width,this.headerHeight),t.fillStyle=this.dividerColor,t.fillRect(0,this.headerHeight-1,this.network.width,1),a=Math.floor((0-this.offsetX)/this.nameLineHeight),a<0&&(a=0),o=Math.floor(a+this.network.width/(this.nameLineHeight-1)),o>this.commits.length&&(o=this.commits.length),t.save(),t.translate(this.offsetX,0),r=null,i=null,e=n=s=a,c=o;s<=c?n<c:n>c;e=s<=c?++n:--n){const n=this.commits[e],o=this.months[n.date.getMonth()];if(o!==r){t.font="bold 12px 'Helvetica Neue', Arial, sans-serif",t.fillStyle=wc("--color-text-primary");const n=this.ctx.measureText(o).width;t.fillText(o,e*this.nameLineHeight-n/2,this.headerHeight/2+4),r=o}const a=n.date.getDate();if(a!==i){t.font="12px 'Helvetica Neue', Arial, sans-serif",t.fillStyle=wc("--color-text-primary");const n=this.ctx.measureText(a.toString()).width;t.fillText(a.toString(),e*this.nameLineHeight-n/2,this.headerHeight+this.dateRowHeight/2+3),i=a,t.fillStyle=wc("--color-border-primary"),t.fillRect(e*this.nameLineHeight,this.headerHeight,1,6)}}t.restore()}drawUsers(t){let n,e,i;t.fillStyle=wc("--color-bg-primary"),t.fillRect(0,0,this.namesWidth,this.network.height),t.save(),t.translate(0,this.headerHeight+this.dateRowHeight+this.offsetY);const r=this.userBlocks;for(e=n=0,i=r.length;n<i;e=++n){const n=r[e];t.fillStyle=this.userBgColors[e%2],t.fillRect(0,n.start*this.nameLineHeight,this.namesWidth,n.count*this.nameLineHeight),this.activeUser&&this.activeUser.name===n.name&&(t.fillStyle=wc("--color-border-primary"),t.fillRect(0,n.start*this.nameLineHeight,this.namesWidth,n.count*this.nameLineHeight));const i=(n.start+n.count/2)*this.nameLineHeight+3;t.fillStyle=wc("--color-border-primary"),t.fillRect(0,n.start*this.nameLineHeight+n.count*this.nameLineHeight-1,this.namesWidth,1),t.fillStyle=wc("--color-text-primary"),t.font="13px 'Helvetica Neue', Arial, sans-serif",t.textAlign="center",t.fillText(n.name,this.namesWidth/2,i,96)}t.restore(),t.fillStyle=this.headerColor,t.fillRect(0,0,this.namesWidth,this.headerHeight),t.fillStyle=wc("--color-text-primary"),t.font="12px 'Helvetica Neue', Arial, sans-serif",t.fillText("Owners",40,this.headerHeight/2+3);t.fillStyle=this.dividerColor,t.fillRect(this.namesWidth-1,10,1,this.headerHeight-20),t.fillStyle=this.dividerColor,t.fillRect(0,this.headerHeight-1,this.namesWidth,1),t.fillStyle=this.dividerColor,t.fillRect(this.namesWidth-1,this.headerHeight,1,this.network.height-this.headerHeight)}}class NetworkGraph{constructor(t,n,e,i,r,o,a){let s,c,u,l,h,f,p,d,m,g,v;this.network=t,this.ctx=n,this.commits=e,this.users=i,this.spaceMap=r,this.userBlocks=o,this.nethash=a,this.namesWidth=120,this.headerHeight=40,this.dateRowHeight=30,this.graphTopOffset=10+this.headerHeight+this.dateRowHeight,this.bgColors=[wc("--color-bg-primary"),wc("--color-bg-tertiary")],this.nameLineHeight=24,this.spaceColors=["#c0392b","#3498db","#2ecc71","#8e44ad","#f1c40f","#e67e22","#34495e","#e74c3c","#2980b9","#1abc9c","#9b59b6","#f39c12","#7f8c8d","#2c3e50","#d35400","#e74c3c","#95a5a6","#bdc3c7","#16a085","#27ae60"],this.offsetX=this.namesWidth+(t.width-this.namesWidth)/2-t.focus*this.nameLineHeight,this.offsetY=0,this.bgCycle=0,this.marginMap={},this.gravatars={},this.activeCommit=null,this.contentHeight=this.calcContentHeight(),this.graphMidpoint=this.namesWidth+(t.width-this.namesWidth)/2,this.showRefs=!0,this.lastHotLoadCenterIndex=null,this.connectionMap={},this.spaceUserMap={};const y=this.userBlocks;for(c=0,h=y.length;c<h;c++)for(s=y[c],u=l=g=s.start,v=s.start+s.count;g<=v?l<v:l>v;u=g<=v?++l:--l)this.spaceUserMap[u]=this.users[s.name];this.headsMap={};const w=this.userBlocks;for(d=0,f=w.length;d<f;d++){s=w[d];const t=this.users[s.name],n=t.heads;for(m=0,p=n.length;m<p;m++){const e=n[m];this.headsMap[e.id]||(this.headsMap[e.id]=[]);const i={name:t.name,head:e};this.headsMap[e.id].push(i)}}}moveX(t){this.offsetX+=t,this.offsetX>this.graphMidpoint?this.offsetX=this.graphMidpoint:this.offsetX<this.graphMidpoint-this.commits.length*this.nameLineHeight&&(this.offsetX=this.graphMidpoint-this.commits.length*this.nameLineHeight),this.hotLoadCommits()}moveY(t){this.offsetY+=t,this.offsetY>0||this.contentHeight<this.network.height-this.graphTopOffset?this.offsetY=0:this.offsetY<-this.contentHeight+this.network.height/2&&(this.offsetY=-this.contentHeight+this.network.height/2)}toggleRefs(){this.showRefs=!this.showRefs}calcContentHeight(){let t,n,e=0;const i=this.userBlocks;for(t=0,n=i.length;t<n;t++){e+=i[t].count}return e*this.nameLineHeight}hover(t,n){let e,i,r,o;const a=this.timeWindow();for(i=e=r=a.min,o=a.max;r<=o?e<=o:e>=o;i=r<=o?++e:--e){const e=this.commits[i],r=this.offsetX+e.time*this.nameLineHeight,o=this.offsetY+this.graphTopOffset+e.space*this.nameLineHeight;if(t>r-5&&t<r+5&&n>o-5&&n<o+5)return e}return null}hotLoadCommits(){let t;if(t=Math.floor((-this.offsetX+this.graphMidpoint)/this.nameLineHeight),t<0&&(t=0),t>this.commits.length-1&&(t=this.commits.length-1),null!=this.lastHotLoadCenterIndex&&Math.abs(this.lastHotLoadCenterIndex-t)<10)return;this.lastHotLoadCenterIndex=t;const n=this.backSpan(t,200),e=this.frontSpan(t,200);return n&&e?this.requestChunk(n[0],e[1]):e?this.requestChunk(e[0],e[1]):n?this.requestChunk(n[0],n[1]):void 0}backSpan(t,n){let e,i,r,o,a,s,c,u;for(o=null,i=e=c=t;(c<=0?e<=0:e>=0)&&i>t-n;i=c<=0?++e:--e)if(!this.commits[i].requested){o=i;break}if(null!==o){for(a=null,s=null,i=r=u=o;(u<=0?r<=0:r>=0)&&i>o-n;i=u<=0?++r:--r)if(this.commits[i].requested){a=i;break}return null!=a?s=a+1:(s=o-n,s<0&&(s=0)),[s,o]}return null}frontSpan(t,n){let e,i,r,o,a,s,c,u,l,h;for(u=null,i=e=o=t,a=this.commits.length;(o<=a?e<a:e>a)&&i<t+n;i=o<=a?++e:--e)if(!this.commits[i].requested){u=i;break}if(null!==u){for(l=null,h=null,i=r=s=u,c=this.commits.length;(s<=c?r<c:r>c)&&i<u+n;i=s<=c?++r:--r)if(this.commits[i].requested){l=i;break}return h=null!=l?l-1:u+n>=this.commits.length?this.commits.length-1:u+n,[u,h]}return null}chunkUrl(t){const n=document.querySelector(".js-network-graph-container").getAttribute("data-network-graph-chunk-url"),e=new URL(n,window.location.origin),i=new URLSearchParams(e.search.slice(1));for(const r in t)i.append(r,t[r]);return e.search=i.toString(),e.toString()}async requestInitialChunk(){if(!xc)return;const t=this.chunkUrl({nethash:this.nethash}),n=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!n.ok){const t=new Error,e=n.statusText?" "+n.statusText:"";throw t.message=`HTTP ${n.status}${e}`,t}const e=await n.json();this.importChunk(e),this.draw(),this.network.chrome.draw()}async requestChunk(t,n){let e,i,r,o;if(!xc)return;for(i=e=r=t,o=n;r<=o?e<=o:e>=o;i=r<=o?++e:--e)this.commits[i].requested=!0;const a=this.chunkUrl({nethash:this.nethash,start:t.toString(),end:n.toString()}),s=await fetch(a,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!s.ok){const t=new Error,n=s.statusText?" "+s.statusText:"";throw t.message=`HTTP ${s.status}${n}`,t}const c=await s.json();this.importChunk(c),this.draw(),this.network.chrome.draw(),this.lastHotLoadCenterIndex=this.network.focus}importChunk(t){let n,e,i;if(!t.commits)return;const r=t.commits,o=[];for(n=0,i=r.length;n<i;n++){const t=r[n],i=this.spaceUserMap[t.space],a=this.commits[t.time];let s,c;a.populate(t,i,this.commits);const u=a.parents,l=[];for(s=0,c=u.length;s<c;s++){let t,n,i;const r=[];for(e=t=n=u[s].time+1,i=a.time;n<=i?t<i:t>i;e=n<=i?++t:--t)this.connectionMap[e]=this.connectionMap[e]||[],r.push(this.connectionMap[e].push(a));l.push(r)}o.push(l)}return o}timeWindow(){let t,n;return n=Math.floor((this.namesWidth-this.offsetX+this.nameLineHeight)/this.nameLineHeight),n<0&&(n=0),t=n+Math.floor((this.network.width-this.namesWidth)/this.nameLineHeight),t>this.commits.length-1&&(t=this.commits.length-1),{min:n,max:t}}draw(){let t,n,e,i,r,o,a,s,c,u,l,h,f,p,d,m,g,v,y,w,x,_,b,M;this.drawBackground();const k=this.timeWindow(),S=k.min,T=k.max;this.ctx.save(),this.ctx.translate(this.offsetX,this.offsetY+this.graphTopOffset);const C={};for(e=n=0,o=this.spaceMap.length;n<o;e=++n)for(b=this.spaceMap.length-e-1,i=r=m=S,g=T;m<=g?r<=g:r>=g;i=m<=g?++r:--r)t=this.commits[i],t.populated&&t.space===b&&(this.drawConnection(t),C[t.id]=!0);for(e=u=v=S,y=T;v<=y?u<=y:u>=y;e=v<=y?++u:--u){const n=this.connectionMap[e];if(n)for(l=0,a=n.length;l<a;l++)t=n[l],C[t.id]||(this.drawConnection(t),C[t.id]=!0)}for(e=h=0,s=this.spaceMap.length;h<s;e=++h)for(b=this.spaceMap.length-e-1,i=f=w=S,x=T;w<=x?f<=x:f>=x;i=w<=x?++f:--f)t=this.commits[i],t.populated&&t.space===b&&(t===this.activeCommit?this.drawActiveCommit(t):this.drawCommit(t));if(this.showRefs)for(i=p=_=S,d=T;_<=d?p<=d:p>=d;i=_<=d?++p:--p){if(t=this.commits[i],!t.populated)continue;const n=this.headsMap[t.id];if(!n)continue;let e=0;for(M=0,c=n.length;M<c;M++){const i=n[M];if(this.spaceUserMap[t.space].name===i.name){e+=this.drawHead(t,i.head,e)}}}if(this.ctx.restore(),this.activeCommit)return this.drawCommitInfo(this.activeCommit)}drawBackground(){let t,n,e;this.ctx.clearRect(0,0,this.network.width,this.network.height),this.ctx.save(),this.ctx.translate(0,this.offsetY+this.graphTopOffset),this.ctx.clearRect(0,-10,this.network.width,this.network.height);const i=this.userBlocks;for(n=t=0,e=i.length;t<e;n=++t){const t=i[n];this.ctx.fillStyle=this.bgColors[n%2],this.ctx.fillRect(0,t.start*this.nameLineHeight-10,this.network.width,t.count*this.nameLineHeight),this.ctx.fillStyle=wc("--color-border-primary"),this.ctx.fillRect(0,(t.start+t.count)*this.nameLineHeight-11,this.network.width,1)}return this.ctx.restore()}drawCommit(t){const n=t.time*this.nameLineHeight,e=t.space*this.nameLineHeight;return this.ctx.beginPath(),this.ctx.arc(n,e,3,0,2*Math.PI,!1),this.ctx.fillStyle=this.spaceColor(t.space),this.ctx.fill()}drawActiveCommit(t){const n=t.time*this.nameLineHeight,e=t.space*this.nameLineHeight;return this.ctx.beginPath(),this.ctx.arc(n,e,6,0,2*Math.PI,!1),this.ctx.fillStyle=this.spaceColor(t.space),this.ctx.fill()}drawCommitInfo(t){const n=t.message?this.splitLines(t.message,48):[],e=Math.max(56,38+16*n.length),i=this.offsetX+t.time*this.nameLineHeight,r=this.graphTopOffset+this.offsetY+t.space*this.nameLineHeight;let o=0,a=0;o=i<this.graphMidpoint?i+10:i-350,a=r<40+(this.network.height-40)/2?r+10:r-e-10,this.ctx.save(),this.ctx.translate(o,a),this.ctx.fillStyle=wc("--color-bg-overlay"),this.ctx.strokeStyle=wc("--color-border-primary"),this.ctx.lineWidth=1,this.roundRect(0,0,340,e,3);let s=this.gravatars[t.gravatar];var c;return s?this.drawGravatar(s,10,10):(s=new Image,s.src=t.gravatar,s.onload=(c=this,function(){c.activeCommit===t&&(c.drawGravatar(s,o+10,a+10),c.gravatars[t.gravatar]=s)})),this.ctx.fillStyle=wc("--color-text-primary"),this.ctx.font="bold 12px 'Helvetica Neue', Arial, sans-serif",this.ctx.fillText(t.author,55,24),this.ctx.fillStyle=wc("--color-text-secondary"),this.ctx.font="11px Consolas, Menlo, Courier, monospace",t.id&&this.ctx.fillText(t.id.slice(0,7),280,24),this.drawMessage(n,55,41),this.ctx.restore()}drawGravatar(t,n,e){return this.ctx.save(),this.ctx.fillStyle="#fff",this.ctx.strokeStyle="rgba(0, 0, 0, 0.0)",this.ctx.lineWidth=.1,this.roundRect(n+2,e+2,32,32,4),this.ctx.clip(),this.ctx.drawImage(t,n+2,e+2,32,32),this.ctx.restore()}roundRect(t,n,e,i,r){return this.ctx.beginPath(),this.ctx.moveTo(t,n+r),this.ctx.lineTo(t,n+i-r),this.ctx.quadraticCurveTo(t,n+i,t+r,n+i),this.ctx.lineTo(t+e-r,n+i),this.ctx.quadraticCurveTo(t+e,n+i,t+e,n+i-r),this.ctx.lineTo(t+e,n+r),this.ctx.quadraticCurveTo(t+e,n,t+e-r,n),this.ctx.lineTo(t+r,n),this.ctx.quadraticCurveTo(t,n,t,n+r),this.ctx.fill(),this.ctx.stroke()}drawMessage(t,n,e){let i,r,o;this.ctx.font="12px 'Helvetica Neue', Arial, sans-serif",this.ctx.fillStyle=wc("--color-text-primary");const a=[];for(r=i=0,o=t.length;i<o;r=++i){const i=t[r];a.push(this.ctx.fillText(i,n,e+16*r))}return a}splitLines(t,n){let e,i,r;const o=t.split(" "),a=[];for(r="",e=0,i=o.length;e<i;e++){const t=o[e];r.length+1+t.length<n?r=""===r?t:`${r} ${t}`:(a.push(r),r=t)}return a.push(r),a}drawHead(t,n,e){this.ctx.font="11px 'Helvetica Neue', Arial, sans-serif",this.ctx.save();const i=this.ctx.measureText(n.name).width;this.ctx.restore();const r=t.time*this.nameLineHeight,o=t.space*this.nameLineHeight+5+e;return this.ctx.save(),this.ctx.translate(r,o-2.5),this.ctx.fillStyle=wc("--color-tooltip-bg"),this.ctx.beginPath(),this.ctx.moveTo(0,2.5),this.ctx.lineTo(-4,10),this.ctx.quadraticCurveTo(-9,10,-9,15),this.ctx.lineTo(-9,15+i),this.ctx.quadraticCurveTo(-9,15+i+5,-4,15+i+5),this.ctx.lineTo(4,15+i+5),this.ctx.quadraticCurveTo(9,15+i+5,9,15+i),this.ctx.lineTo(9,15),this.ctx.quadraticCurveTo(9,10,4,10),this.ctx.lineTo(0,2.5),this.ctx.fill(),this.ctx.fillStyle=wc("--color-tooltip-text"),this.ctx.font="12px 'Helvetica Neue', Arial, sans-serif",this.ctx.textBaseline="middle",this.ctx.scale(.85,.85),this.ctx.rotate(Math.PI/2),this.ctx.fillText(n.name,19,-.5),this.ctx.restore(),i+this.nameLineHeight}drawConnection(t){let n,e,i;const r=t.parents,o=[];for(e=n=0,i=r.length;n<i;e=++n){const n=r[e];0===e?n.space===t.space?o.push(this.drawBasicConnection(n,t)):o.push(this.drawBranchConnection(n,t)):o.push(this.drawMergeConnection(n,t))}return o}drawBasicConnection(t,n){const e=this.spaceColor(n.space);return this.ctx.strokeStyle=e,this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(t.time*this.nameLineHeight,n.space*this.nameLineHeight),this.ctx.lineTo(n.time*this.nameLineHeight,n.space*this.nameLineHeight),this.ctx.stroke()}drawBranchConnection(t,n){const e=this.spaceColor(n.space);return this.ctx.strokeStyle=e,this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(t.time*this.nameLineHeight,t.space*this.nameLineHeight),this.ctx.lineTo(t.time*this.nameLineHeight,n.space*this.nameLineHeight),this.ctx.lineTo(n.time*this.nameLineHeight-10,n.space*this.nameLineHeight),this.ctx.stroke(),this.threeClockArrow(e,n.time*this.nameLineHeight,n.space*this.nameLineHeight)}drawMergeConnection(t,n){let e;const i=this.spaceColor(t.space);if(this.ctx.strokeStyle=i,this.ctx.lineWidth=2,this.ctx.beginPath(),t.space>n.space){this.ctx.moveTo(t.time*this.nameLineHeight,t.space*this.nameLineHeight);return this.safePath(t.time,n.time,t.space)?(this.ctx.lineTo(n.time*this.nameLineHeight-10,t.space*this.nameLineHeight),this.ctx.lineTo(n.time*this.nameLineHeight-10,n.space*this.nameLineHeight+15),this.ctx.lineTo(n.time*this.nameLineHeight-5.7,n.space*this.nameLineHeight+7.5),this.ctx.stroke(),this.oneClockArrow(i,n.time*this.nameLineHeight,n.space*this.nameLineHeight)):(e=this.closestMargin(t.time,n.time,t.space,-1),t.space===n.space+1&&t.space===e+1?(this.ctx.lineTo(t.time*this.nameLineHeight,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-15,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-9.5,e*this.nameLineHeight+7.7),this.ctx.stroke(),this.twoClockArrow(i,n.time*this.nameLineHeight,e*this.nameLineHeight),this.addMargin(t.time,n.time,e)):t.time+1===n.time?(e=this.closestMargin(t.time,n.time,n.space,0),this.ctx.lineTo(t.time*this.nameLineHeight,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-15,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-15,n.space*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-9.5,n.space*this.nameLineHeight+7.7),this.ctx.stroke(),this.twoClockArrow(i,n.time*this.nameLineHeight,n.space*this.nameLineHeight),this.addMargin(t.time,n.time,e)):(this.ctx.lineTo(t.time*this.nameLineHeight+10,t.space*this.nameLineHeight-10),this.ctx.lineTo(t.time*this.nameLineHeight+10,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-10,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-10,n.space*this.nameLineHeight+15),this.ctx.lineTo(n.time*this.nameLineHeight-5.7,n.space*this.nameLineHeight+7.5),this.ctx.stroke(),this.oneClockArrow(i,n.time*this.nameLineHeight,n.space*this.nameLineHeight),this.addMargin(t.time,n.time,e)))}return e=this.closestMargin(t.time,n.time,n.space,-1),e<n.space?(this.ctx.moveTo(t.time*this.nameLineHeight,t.space*this.nameLineHeight),this.ctx.lineTo(t.time*this.nameLineHeight,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-12.7,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-12.7,n.space*this.nameLineHeight-10),this.ctx.lineTo(n.time*this.nameLineHeight-9.4,n.space*this.nameLineHeight-7.7),this.ctx.stroke(),this.fourClockArrow(i,n.time*this.nameLineHeight,n.space*this.nameLineHeight),this.addMargin(t.time,n.time,e)):(this.ctx.moveTo(t.time*this.nameLineHeight,t.space*this.nameLineHeight),this.ctx.lineTo(t.time*this.nameLineHeight,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-12.7,e*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-12.7,n.space*this.nameLineHeight+10),this.ctx.lineTo(n.time*this.nameLineHeight-9.4,n.space*this.nameLineHeight+7.7),this.ctx.stroke(),this.twoClockArrow(i,n.time*this.nameLineHeight,n.space*this.nameLineHeight),this.addMargin(t.time,n.time,e))}addMargin(t,n,e){return this.marginMap[e]||(this.marginMap[e]=[]),this.marginMap[e].push([t,n])}oneClockArrow(t,n,e){return this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.moveTo(n-3,e+10.5),this.ctx.lineTo(n-9,e+5.5),this.ctx.lineTo(n-2.6,e+3.5),this.ctx.fill()}twoClockArrow(t,n,e){return this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.moveTo(n-12.4,e+6.6),this.ctx.lineTo(n-9.3,e+10.6),this.ctx.lineTo(n-3.2,e+2.4),this.ctx.fill()}threeClockArrow(t,n,e){return this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.moveTo(n-10,e-3.5),this.ctx.lineTo(n-10,e+3.5),this.ctx.lineTo(n-4,e),this.ctx.fill()}fourClockArrow(t,n,e){return this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.moveTo(n-12.4,e-6.6),this.ctx.lineTo(n-9.3,e-10.6),this.ctx.lineTo(n-3.2,e-2.4),this.ctx.fill()}safePath(t,n,e){let i,r;const o=this.spaceMap[e];for(i=0,r=o.length;i<r;i++){const e=o[i];if(this.timeInPath(t,e))return e[1]===n}return!1}closestMargin(t,n,e,i){let r,o,a,s;const c=this.spaceMap.length;for(a=i,o=!1,r=!1,s=!1;!r||!o;){if(e+a>=0&&this.safeMargin(t,n,e+a))return e+a;e+a<0&&(o=!0),e+a>c&&(r=!0),!1===s&&0===a?(a=-1,s=!0):a=a<0?-a-1:-a-2}return e>0?e-1:0}safeMargin(t,n,e){let i,r;if(!this.marginMap[e])return!0;const o=this.marginMap[e];for(i=0,r=o.length;i<r;i++){const e=o[i];if(this.pathsCollide([t,n],e))return!1}return!0}pathsCollide(t,n){return this.timeWithinPath(t[0],n)||this.timeWithinPath(t[1],n)||this.timeWithinPath(n[0],t)||this.timeWithinPath(n[1],t)}timeInPath(t,n){return t>=n[0]&&t<=n[1]}timeWithinPath(t,n){return t>n[0]&&t<n[1]}spaceColor(t){return 0===t?wc("--color-icon-primary"):this.spaceColors[t%this.spaceColors.length]}}class MouseDriver{constructor(t,n,e){this.container=null,this.chrome=n,this.graph=e,this.dragging=!1,this.lastPoint={x:0,y:0},this.lastHoverCommit=null,this.lastHoverUser=null,this.pressedCommit=null,this.pressedUser=null,this.canvas=t.getElementsByTagName("canvas")[0],this.canvasOffset=u(this.canvas),this.canvas.style.cursor="move",document.body.addEventListener("mouseup",(()=>this.up())),document.body.addEventListener("mousemove",(t=>this.docmove(t))),this.canvas.addEventListener("mousedown",(()=>this.down())),this.canvas.addEventListener("mousemove",(t=>this.move(t))),this.canvas.addEventListener("mouseout",(()=>this.out()))}up(){this.dragging=!1,this.pressedCommit&&this.graph.activeCommit&&this.graph.activeCommit===this.pressedCommit?window.open(`/${this.graph.activeCommit.user.name}/${this.graph.activeCommit.user.repo}/commit/${this.graph.activeCommit.id}`):this.pressedUser&&this.chrome.activeUser&&this.chrome.activeUser===this.pressedUser&&(window.location.href=`/${this.chrome.activeUser.name}/${this.chrome.activeUser.repo}/network`),this.pressedCommit=null,this.pressedUser=null}down(){this.graph.activeCommit?this.pressedCommit=this.graph.activeCommit:this.chrome.activeUser?this.pressedUser=this.chrome.activeUser:this.dragging=!0}docmove(t){const n=t.pageX,e=t.pageY;this.dragging&&(this.graph.moveX(n-this.lastPoint.x),this.graph.moveY(e-this.lastPoint.y),this.graph.draw(),this.chrome.moveX(n-this.lastPoint.x),this.chrome.moveY(e-this.lastPoint.y),this.chrome.draw()),this.lastPoint.x=n,this.lastPoint.y=e}move(t){const n=t.pageX,e=t.pageY;if(this.dragging)this.graph.moveX(n-this.lastPoint.x),this.graph.moveY(e-this.lastPoint.y),this.graph.draw(),this.chrome.moveX(n-this.lastPoint.x),this.chrome.moveY(e-this.lastPoint.y),this.chrome.draw();else{const t=this.chrome.hover(n-this.canvasOffset.left,e-this.canvasOffset.top);if(t!==this.lastHoverUser)this.canvas.style.cursor=t?"pointer":"move",this.chrome.activeUser=t,this.chrome.draw(),this.lastHoverUser=t;else{const t=this.graph.hover(n-this.canvasOffset.left,e-this.canvasOffset.top);t!==this.lastHoverCommit&&(this.canvas.style.cursor=t?"pointer":"move",this.graph.activeCommit=t,this.graph.draw(),this.chrome.draw(),this.lastHoverCommit=t)}}this.lastPoint.x=n,this.lastPoint.y=e}out(){this.graph.activeCommit=null,this.chrome.activeUser=null,this.graph.draw(),this.chrome.draw(),this.lastHoverCommit=null,this.lastHoverUser=null}}class KeyDriver{constructor(t,n){this.chrome=t,this.graph=n,this.dirty=!1,document.addEventListener("keydown",(t=>this.down(t)))}moveBothX(t){this.graph.moveX(t),this.chrome.moveX(t),this.graph.activeCommit=null,this.dirty=!0}moveBothY(t){this.graph.moveY(t),this.chrome.moveY(t),this.graph.activeCommit=null,this.dirty=!0}toggleRefs(){this.graph.toggleRefs(),this.dirty=!0}redraw(){this.dirty&&(this.graph.draw(),this.chrome.draw()),this.dirty=!1}down(t){if(t.target instanceof HTMLInputElement)return!0;if(t.shiftKey)switch(t.which){case 37:case 72:return this.moveBothX(999999),this.redraw();case 38:case 75:return this.moveBothY(999999),this.redraw();case 39:case 76:return this.moveBothX(-999999),this.redraw();case 40:case 74:return this.moveBothY(-999999),this.redraw()}else switch(t.which){case 37:case 72:return this.moveBothX(100),this.redraw();case 38:case 75:return this.moveBothY(30),this.redraw();case 39:case 76:return this.moveBothX(-100),this.redraw();case 40:case 74:return this.moveBothY(-30),this.redraw();case 84:return this.toggleRefs(),this.redraw()}}}let xc=!1;function _c(t){return t}function bc(t,n){var e=n.id,i=n.bbox,r=null==n.properties?{}:n.properties,o=Mc(t,n);return null==e&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:e,properties:r,geometry:o}:{type:"Feature",id:e,bbox:i,properties:r,geometry:o}}function Mc(t,n){var e=function(t){if(null==t)return _c;var n,e,i=t.scale[0],r=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(n=e=0);var c=2,u=t.length,l=new Array(u);for(l[0]=(n+=t[0])*i+o,l[1]=(e+=t[1])*r+a;c<u;)l[c]=t[c],++c;return l}}(t.transform),i=t.arcs;function r(t,n){n.length&&n.pop();for(var r=i[t<0?~t:t],o=0,a=r.length;o<a;++o)n.push(e(r[o],o));t<0&&function(t,n){for(var e,i=t.length,r=i-n;r<--i;)e=t[r],t[r++]=t[i],t[i]=e}(n,a)}function o(t){return e(t)}function a(t){for(var n=[],e=0,i=t.length;e<i;++e)r(t[e],n);return n.length<2&&n.push(n[0]),n}function s(t){for(var n=a(t);n.length<4;)n.push(n[0]);return n}function c(t){return t.map(s)}return function t(n){var e,i=n.type;switch(i){case"GeometryCollection":return{type:i,geometries:n.geometries.map(t)};case"Point":e=o(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(o);break;case"LineString":e=a(n.arcs);break;case"MultiLineString":e=n.arcs.map(a);break;case"Polygon":e=c(n.arcs);break;case"MultiPolygon":e=n.arcs.map(c);break;default:return null}return{type:i,coordinates:e}}(n)}function kc(t,n){var e={},i={},r={},o=[],a=-1;function s(t,n){for(var i in t){var r=t[i];delete n[r.start],delete r.start,delete r.end,r.forEach((function(t){e[t<0?~t:t]=1})),o.push(r)}}return n.forEach((function(e,i){var r,o=t.arcs[e<0?~e:e];o.length<3&&!o[1][0]&&!o[1][1]&&(r=n[++a],n[a]=e,n[i]=r)})),n.forEach((function(n){var e,o,a=function(n){var e,i=t.arcs[n<0?~n:n],r=i[0];t.transform?(e=[0,0],i.forEach((function(t){e[0]+=t[0],e[1]+=t[1]}))):e=i[i.length-1];return n<0?[e,r]:[r,e]}(n),s=a[0],c=a[1];if(e=r[s])if(delete r[e.end],e.push(n),e.end=c,o=i[c]){delete i[o.start];var u=o===e?e:e.concat(o);i[u.start=e.start]=r[u.end=o.end]=u}else i[e.start]=r[e.end]=e;else if(e=i[c])if(delete i[e.start],e.unshift(n),e.start=s,o=r[s]){delete r[o.end];var l=o===e?e:o.concat(e);i[l.start=o.start]=r[l.end=e.end]=l}else i[e.start]=r[e.end]=e;else i[(e=[n]).start=s]=r[e.end=c]=e})),s(r,i),s(i,r),n.forEach((function(t){e[t<0?~t:t]||o.push([t])})),o}function Sc(t){return Mc(t,Tc.apply(this,arguments))}function Tc(t,n,e){var i,r,o;if(arguments.length>1)i=Cc(t,n,e);else for(r=0,i=new Array(o=t.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:kc(t,i)}}function Cc(t,n,e){var i,r=[],o=[];function a(t){var n=t<0?~t:t;(o[n]||(o[n]=[])).push({i:t,g:i})}function s(t){t.forEach(a)}function c(t){t.forEach(s)}return function t(n){switch(i=n,n.type){case"GeometryCollection":n.geometries.forEach(t);break;case"LineString":s(n.arcs);break;case"MultiLineString":case"Polygon":c(n.arcs);break;case"MultiPolygon":!function(t){t.forEach(c)}(n.arcs)}}(n),o.forEach(null==e?function(t){r.push(t[0].i)}:function(t){e(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}e(".js-network-graph-container",(function(t){const n=new Network(t),e=i(n.redraw.bind(n),100);return{add(){xc=!0,window.addEventListener("resize",e)},remove(){xc=!1,window.removeEventListener("resize",e)}}}));var Lc=1e-6,Hc=1e-12,Ac=Math.PI,Ec=Ac/2,Nc=Ac/4,Uc=2*Ac,$c=180/Ac,qc=Ac/180,jc=Math.abs,zc=Math.atan,Pc=Math.atan2,Dc=Math.cos,Yc=Math.ceil,Fc=Math.hypot,Rc=Math.sin,Xc=Math.sign||function(t){return t>0?1:t<0?-1:0},Bc=Math.sqrt;function Wc(t){return t>1?Ec:t<-1?-Ec:Math.asin(t)}function Ic(){}function Oc(t,n){t&&hu.hasOwnProperty(t.type)&&hu[t.type](t,n)}var Vc,Gc,Zc,Jc,Kc,Qc,tu,nu,eu,iu,ru,ou,au,su,cu,uu,lu={Feature:function(t,n){Oc(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,i=-1,r=e.length;++i<r;)Oc(e[i].geometry,n)}},hu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)t=e[i],n.point(t[0],t[1],t[2])},LineString:function(t,n){fu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)fu(e[i],n,0)},Polygon:function(t,n){pu(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,i=-1,r=e.length;++i<r;)pu(e[i],n)},GeometryCollection:function(t,n){for(var e=t.geometries,i=-1,r=e.length;++i<r;)Oc(e[i],n)}};function fu(t,n,e){var i,r=-1,o=t.length-e;for(n.lineStart();++r<o;)i=t[r],n.point(i[0],i[1],i[2]);n.lineEnd()}function pu(t,n){var e=-1,i=t.length;for(n.polygonStart();++e<i;)fu(t[e],n,1);n.polygonEnd()}function du(t,n){t&&lu.hasOwnProperty(t.type)?lu[t.type](t,n):Oc(t,n)}function mu(t){return[Pc(t[1],t[0]),Wc(t[2])]}function gu(t){var n=t[0],e=t[1],i=Dc(e);return[i*Dc(n),i*Rc(n),Rc(e)]}function vu(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function yu(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function wu(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function xu(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function _u(t){var n=Bc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var bu={sphere:Ic,point:Mu,lineStart:Su,lineEnd:Lu,polygonStart:function(){bu.lineStart=Hu,bu.lineEnd=Au},polygonEnd:function(){bu.lineStart=Su,bu.lineEnd=Lu}};function Mu(t,n){t*=qc;var e=Dc(n*=qc);ku(e*Dc(t),e*Rc(t),Rc(n))}function ku(t,n,e){++Vc,Zc+=(t-Zc)/Vc,Jc+=(n-Jc)/Vc,Kc+=(e-Kc)/Vc}function Su(){bu.point=Tu}function Tu(t,n){t*=qc;var e=Dc(n*=qc);su=e*Dc(t),cu=e*Rc(t),uu=Rc(n),bu.point=Cu,ku(su,cu,uu)}function Cu(t,n){t*=qc;var e=Dc(n*=qc),i=e*Dc(t),r=e*Rc(t),o=Rc(n),a=Pc(Bc((a=cu*o-uu*r)*a+(a=uu*i-su*o)*a+(a=su*r-cu*i)*a),su*i+cu*r+uu*o);Gc+=a,Qc+=a*(su+(su=i)),tu+=a*(cu+(cu=r)),nu+=a*(uu+(uu=o)),ku(su,cu,uu)}function Lu(){bu.point=Mu}function Hu(){bu.point=Eu}function Au(){Nu(ou,au),bu.point=Mu}function Eu(t,n){ou=t,au=n,t*=qc,n*=qc,bu.point=Nu;var e=Dc(n);su=e*Dc(t),cu=e*Rc(t),uu=Rc(n),ku(su,cu,uu)}function Nu(t,n){t*=qc;var e=Dc(n*=qc),i=e*Dc(t),r=e*Rc(t),o=Rc(n),a=cu*o-uu*r,s=uu*i-su*o,c=su*r-cu*i,u=Fc(a,s,c),l=Wc(u),h=u&&-l/u;eu.add(h*a),iu.add(h*s),ru.add(h*c),Gc+=l,Qc+=l*(su+(su=i)),tu+=l*(cu+(cu=r)),nu+=l*(uu+(uu=o)),ku(su,cu,uu)}function Uu(t,n){function e(e,i){return e=t(e,i),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,i){return(e=n.invert(e,i))&&t.invert(e[0],e[1])}),e}function $u(t,n){return[jc(t)>Ac?t+Math.round(-t/Uc)*Uc:t,n]}function qu(t){return function(n,e){return[(n+=t)>Ac?n-Uc:n<-Ac?n+Uc:n,e]}}function ju(t){var n=qu(t);return n.invert=qu(-t),n}function zu(t,n){var e=Dc(t),i=Rc(t),r=Dc(n),o=Rc(n);function a(t,n){var a=Dc(n),s=Dc(t)*a,c=Rc(t)*a,u=Rc(n),l=u*e+s*i;return[Pc(c*r-l*o,s*e-u*i),Wc(l*r+c*o)]}return a.invert=function(t,n){var a=Dc(n),s=Dc(t)*a,c=Rc(t)*a,u=Rc(n),l=u*r-c*o;return[Pc(c*r+u*o,s*e+l*i),Wc(l*e-s*i)]},a}function Pu(t,n){(n=gu(n))[0]-=t,_u(n);var e=function(t){return t>1?0:t<-1?Ac:Math.acos(t)}(-n[1]);return((-n[2]<0?-e:e)+Uc-Lc)%Uc}function Du(){var t,n=[];return{point:function(n,e,i){t.push([n,e,i])},lineStart:function(){n.push(t=[])},lineEnd:Ic,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Yu(t,n){return jc(t[0]-n[0])<Lc&&jc(t[1]-n[1])<Lc}function Fu(t,n,e,i){this.x=t,this.z=n,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function Ru(t,n,e,i,r){var o,a,s=[],c=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,i=t[0],a=t[n];if(Yu(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<n;++o)r.point((i=t[o])[0],i[1]);return void r.lineEnd()}a[0]+=2e-6}s.push(e=new Fu(i,t,null,!0)),c.push(e.o=new Fu(i,null,e,!1)),s.push(e=new Fu(a,t,null,!1)),c.push(e.o=new Fu(a,null,e,!0))}})),s.length){for(c.sort(n),Xu(s),Xu(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var u,l,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;u=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=u.length;o<a;++o)r.point((l=u[o])[0],l[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(u=f.p.z,o=u.length-1;o>=0;--o)r.point((l=u[o])[0],l[1]);else i(f.x,f.p.x,-1,r);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);r.lineEnd()}}}function Xu(t){if(n=t.length){for(var n,e,i=0,r=t[0];++i<n;)r.n=e=t[i],e.p=r,r=e;r.n=e=t[0],e.p=r}}function Bu(t){return jc(t[0])<=Ac?t[0]:Xc(t[0])*((jc(t[0])+Ac)%Uc-Ac)}function Wu(t,n,e,i){return function(r){var o,a,s,c=n(r),u=Du(),l=n(u),h=!1,f={point:p,lineStart:m,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=y,f.lineEnd=w,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=g,a=S(a);var t=function(t,n){var e=Bu(n),i=n[1],r=Rc(i),o=[Rc(e),-Dc(e),0],a=0,s=0,c=new Adder;1===r?i=Ec+Lc:-1===r&&(i=-Ec-Lc);for(var u=0,l=t.length;u<l;++u)if(f=(h=t[u]).length)for(var h,f,p=h[f-1],d=Bu(p),m=p[1]/2+Nc,g=Rc(m),v=Dc(m),y=0;y<f;++y,d=x,g=b,v=M,p=w){var w=h[y],x=Bu(w),_=w[1]/2+Nc,b=Rc(_),M=Dc(_),k=x-d,S=k>=0?1:-1,T=S*k,C=T>Ac,L=g*b;if(c.add(Pc(L*S*Rc(T),v*M+L*Dc(T))),a+=C?k+S*Uc:k,C^d>=e^x>=e){var H=yu(gu(p),gu(w));_u(H);var A=yu(o,H);_u(A);var E=(C^k>=0?-1:1)*Wc(A[2]);(i>E||i===E&&(H[0]||H[1]))&&(s+=C^k>=0?1:-1)}}return(a<-1e-6||a<Lc&&c<-1e-12)^1&s}(o,i);a.length?(h||(r.polygonStart(),h=!0),Ru(a,Ou,t,e,r)):t&&(h||(r.polygonStart(),h=!0),r.lineStart(),e(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),e(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(n,e){t(n,e)&&r.point(n,e)}function d(t,n){c.point(t,n)}function m(){f.point=d,c.lineStart()}function g(){f.point=p,c.lineEnd()}function v(t,n){s.push([t,n]),l.point(t,n)}function y(){l.lineStart(),s=[]}function w(){v(s[0][0],s[0][1]),l.lineEnd();var t,n,e,i,c=l.clean(),f=u.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&c){if((n=(e=f[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),t=0;t<n;++t)r.point((i=e[t])[0],i[1]);r.lineEnd()}}else p>1&&2&c&&f.push(f.pop().concat(f.shift())),a.push(f.filter(Iu))}return f}}function Iu(t){return t.length>1}function Ou(t,n){return((t=t.x)[0]<0?t[1]-Ec-Lc:Ec-t[1])-((n=n.x)[0]<0?n[1]-Ec-Lc:Ec-n[1])}$u.invert=$u;var Vu=Wu((function(){return!0}),(function(t){var n,e=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var s=o>0?Ac:-Ac,c=jc(o-e);jc(c-Ac)<Lc?(t.point(e,i=(i+a)/2>0?Ec:-Ec),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),n=0):r!==s&&c>=Ac&&(jc(e-r)<Lc&&(e-=r*Lc),jc(o-s)<Lc&&(o-=s*Lc),i=function(t,n,e,i){var r,o,a=Rc(t-e);return jc(a)>Lc?zc((Rc(n)*(o=Dc(i))*Rc(e)-Rc(i)*(r=Dc(n))*Rc(t))/(r*o*a)):(n+i)/2}(e,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),n=0),t.point(e=o,i=a),r=s},lineEnd:function(){t.lineEnd(),e=i=NaN},clean:function(){return 2-n}}}),(function(t,n,e,i){var r;if(null==t)r=e*Ec,i.point(-Ac,r),i.point(0,r),i.point(Ac,r),i.point(Ac,0),i.point(Ac,-r),i.point(0,-r),i.point(-Ac,-r),i.point(-Ac,0),i.point(-Ac,r);else if(jc(t[0]-n[0])>Lc){var o=t[0]<n[0]?Ac:-Ac;r=e*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(n[0],n[1])}),[-Ac,-Ec]);function Gu(t){var n=Dc(t),e=6*qc,i=n>0,r=jc(n)>Lc;function o(t,e){return Dc(t)*Dc(e)>n}function a(t,e,i){var r=[1,0,0],o=yu(gu(t),gu(e)),a=vu(o,o),s=o[0],c=a-s*s;if(!c)return!i&&t;var u=n*a/c,l=-n*s/c,h=yu(r,o),f=xu(r,u);wu(f,xu(o,l));var p=h,d=vu(f,p),m=vu(p,p),g=d*d-m*(vu(f,f)-1);if(!(g<0)){var v=Bc(g),y=xu(p,(-d-v)/m);if(wu(y,f),y=mu(y),!i)return y;var w,x=t[0],_=e[0],b=t[1],M=e[1];_<x&&(w=x,x=_,_=w);var k=_-x,S=jc(k-Ac)<Lc;if(!S&&M<b&&(w=b,b=M,M=w),S||k<Lc?S?b+M>0^y[1]<(jc(y[0]-x)<Lc?b:M):b<=y[1]&&y[1]<=M:k>Ac^(x<=y[0]&&y[0]<=_)){var T=xu(p,(-d+v)/m);return wu(T,f),[y,mu(T)]}}}function s(n,e){var r=i?t:Ac-t,o=0;return n<-r?o|=1:n>r&&(o|=2),e<-r?o|=4:e>r&&(o|=8),o}return Wu(o,(function(t){var n,e,c,u,l;return{lineStart:function(){u=c=!1,l=1},point:function(h,f){var p,d=[h,f],m=o(h,f),g=i?m?0:s(h,f):m?s(h+(h<0?Ac:-Ac),f):0;if(!n&&(u=c=m)&&t.lineStart(),m!==c&&(!(p=a(n,d))||Yu(n,p)||Yu(d,p))&&(d[2]=1),m!==c)l=0,m?(t.lineStart(),p=a(d,n),t.point(p[0],p[1])):(p=a(n,d),t.point(p[0],p[1],2),t.lineEnd()),n=p;else if(r&&n&&i^m){var v;g&e||!(v=a(d,n,!0))||(l=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||n&&Yu(n,d)||t.point(d[0],d[1]),n=d,c=m,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return l|(u&&c)<<1}}}),(function(n,i,r,o){!function(t,n,e,i,r,o){if(e){var a=Dc(n),s=Rc(n),c=i*e;null==r?(r=n+i*Uc,o=n-c/2):(r=Pu(a,r),o=Pu(a,o),(i>0?r<o:r>o)&&(r+=i*Uc));for(var u,l=r;i>0?l>o:l<o;l-=c)u=mu([a,-s*Dc(l),-s*Rc(l)]),t.point(u[0],u[1])}}(o,t,e,r,n,i)}),i?[0,-t]:[-Ac,t-Ac])}var Zu=1e9,Ju=-Zu;function Ku(t,n,e,i){function r(r,o){return t<=r&&r<=e&&n<=o&&o<=i}function o(r,o,s,u){var l=0,h=0;if(null==r||(l=a(r,s))!==(h=a(o,s))||c(r,o)<0^s>0)do{u.point(0===l||3===l?t:e,l>1?i:n)}while((l=(l+s+4)%4)!==h);else u.point(o[0],o[1])}function a(i,r){return jc(i[0]-t)<Lc?r>0?0:3:jc(i[0]-e)<Lc?r>0?2:1:jc(i[1]-n)<Lc?r>0?1:0:r>0?3:2}function s(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),i=a(n,1);return e!==i?e-i:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,u,l,h,f,p,d,m,g,v,y,w=a,x=Du(),_={point:b,lineStart:function(){_.point=M,u&&u.push(l=[]);v=!0,g=!1,d=m=NaN},lineEnd:function(){c&&(M(h,f),p&&g&&x.rejoin(),c.push(x.result()));_.point=b,g&&w.lineEnd()},polygonStart:function(){w=x,c=[],u=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,r=u.length;e<r;++e)for(var o,a,s=u[e],c=1,l=s.length,h=s[0],f=h[0],p=h[1];c<l;++c)o=f,a=p,f=(h=s[c])[0],p=h[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(t-o)&&++n:p<=i&&(f-o)*(i-a)<(p-a)*(t-o)&&--n;return n}(),e=y&&n,r=(c=S(c)).length;(e||r)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&Ru(c,s,n,o,a),a.polygonEnd());w=a,c=u=l=null}};function b(t,n){r(t,n)&&w.point(t,n)}function M(o,a){var s=r(o,a);if(u&&l.push([o,a]),v)h=o,f=a,p=s,v=!1,s&&(w.lineStart(),w.point(o,a));else if(s&&g)w.point(o,a);else{var c=[d=Math.max(Ju,Math.min(Zu,d)),m=Math.max(Ju,Math.min(Zu,m))],x=[o=Math.max(Ju,Math.min(Zu,o)),a=Math.max(Ju,Math.min(Zu,a))];!function(t,n,e,i,r,o){var a,s=t[0],c=t[1],u=0,l=1,h=n[0]-s,f=n[1]-c;if(a=e-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>u&&(u=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<l&&(l=a)}if(a=i-c,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>u&&(u=a)}if(a=o-c,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<l&&(l=a)}return u>0&&(t[0]=s+u*h,t[1]=c+u*f),l<1&&(n[0]=s+l*h,n[1]=c+l*f),!0}}}}}(c,x,t,n,e,i)?s&&(w.lineStart(),w.point(o,a),y=!1):(g||(w.lineStart(),w.point(c[0],c[1])),w.point(x[0],x[1]),s||w.lineEnd(),y=!1)}d=o,m=a,g=s}return _}}function Qu(t,n,e){var i=T(t,n-Lc,e).concat(n);return function(t){return i.map((function(n){return[t,n]}))}}function tl(t,n,e){var i=T(t,n-Lc,e).concat(n);return function(t){return i.map((function(n){return[n,t]}))}}var nl,el,il,rl,ol=t=>t,al=new Adder,sl=new Adder,cl={point:Ic,lineStart:Ic,lineEnd:Ic,polygonStart:function(){cl.lineStart=ul,cl.lineEnd=fl},polygonEnd:function(){cl.lineStart=cl.lineEnd=cl.point=Ic,al.add(jc(sl)),sl=new Adder},result:function(){var t=al/2;return al=new Adder,t}};function ul(){cl.point=ll}function ll(t,n){cl.point=hl,nl=il=t,el=rl=n}function hl(t,n){sl.add(rl*t-il*n),il=t,rl=n}function fl(){hl(nl,el)}var pl=1/0,dl=pl,ml=-pl,gl=ml,vl={point:function(t,n){t<pl&&(pl=t);t>ml&&(ml=t);n<dl&&(dl=n);n>gl&&(gl=n)},lineStart:Ic,lineEnd:Ic,polygonStart:Ic,polygonEnd:Ic,result:function(){var t=[[pl,dl],[ml,gl]];return ml=gl=-(dl=pl=1/0),t}};var yl,wl,xl,_l,bl=0,Ml=0,kl=0,Sl=0,Tl=0,Cl=0,Ll=0,Hl=0,Al=0,El={point:Nl,lineStart:Ul,lineEnd:jl,polygonStart:function(){El.lineStart=zl,El.lineEnd=Pl},polygonEnd:function(){El.point=Nl,El.lineStart=Ul,El.lineEnd=jl},result:function(){var t=Al?[Ll/Al,Hl/Al]:Cl?[Sl/Cl,Tl/Cl]:kl?[bl/kl,Ml/kl]:[NaN,NaN];return bl=Ml=kl=Sl=Tl=Cl=Ll=Hl=Al=0,t}};function Nl(t,n){bl+=t,Ml+=n,++kl}function Ul(){El.point=$l}function $l(t,n){El.point=ql,Nl(xl=t,_l=n)}function ql(t,n){var e=t-xl,i=n-_l,r=Bc(e*e+i*i);Sl+=r*(xl+t)/2,Tl+=r*(_l+n)/2,Cl+=r,Nl(xl=t,_l=n)}function jl(){El.point=Nl}function zl(){El.point=Dl}function Pl(){Yl(yl,wl)}function Dl(t,n){El.point=Yl,Nl(yl=xl=t,wl=_l=n)}function Yl(t,n){var e=t-xl,i=n-_l,r=Bc(e*e+i*i);Sl+=r*(xl+t)/2,Tl+=r*(_l+n)/2,Cl+=r,Ll+=(r=_l*t-xl*n)*(xl+t),Hl+=r*(_l+n),Al+=3*r,Nl(xl=t,_l=n)}function Fl(t){this._context=t}Fl.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Uc)}},result:Ic};var Rl,Xl,Bl,Wl,Il,Ol=new Adder,Vl={point:Ic,lineStart:function(){Vl.point=Gl},lineEnd:function(){Rl&&Zl(Xl,Bl),Vl.point=Ic},polygonStart:function(){Rl=!0},polygonEnd:function(){Rl=null},result:function(){var t=+Ol;return Ol=new Adder,t}};function Gl(t,n){Vl.point=Zl,Xl=Wl=t,Bl=Il=n}function Zl(t,n){Wl-=t,Il-=n,Ol.add(Bc(Wl*Wl+Il*Il)),Wl=t,Il=n}function Jl(){this._string=[]}function Kl(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ql(t){return function(n){var e=new th;for(var i in t)e[i]=t[i];return e.stream=n,e}}function th(){}function nh(t,n,e){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),du(e,t.stream(vl)),n(vl.result()),null!=i&&t.clipExtent(i),t}function eh(t,n,e){return nh(t,(function(e){var i=n[1][0]-n[0][0],r=n[1][1]-n[0][1],o=Math.min(i/(e[1][0]-e[0][0]),r/(e[1][1]-e[0][1])),a=+n[0][0]+(i-o*(e[1][0]+e[0][0]))/2,s=+n[0][1]+(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,s])}),e)}Jl.prototype={_radius:4.5,_circle:Kl(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=Kl(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},th.prototype={constructor:th,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ih=Dc(30*qc);function rh(t,n){return+n?function(t,n){function e(i,r,o,a,s,c,u,l,h,f,p,d,m,g){var v=u-i,y=l-r,w=v*v+y*y;if(w>4*n&&m--){var x=a+f,_=s+p,b=c+d,M=Bc(x*x+_*_+b*b),k=Wc(b/=M),S=jc(jc(b)-1)<Lc||jc(o-h)<Lc?(o+h)/2:Pc(_,x),T=t(S,k),C=T[0],L=T[1],H=C-i,A=L-r,E=y*H-v*A;(E*E/w>n||jc((v*H+y*A)/w-.5)>.3||a*f+s*p+c*d<ih)&&(e(i,r,o,a,s,c,C,L,S,x/=M,_/=M,b,m,g),g.point(C,L),e(C,L,S,x,_,b,u,l,h,f,p,d,m,g))}}return function(n){var i,r,o,a,s,c,u,l,h,f,p,d,m={point:g,lineStart:v,lineEnd:w,polygonStart:function(){n.polygonStart(),m.lineStart=x},polygonEnd:function(){n.polygonEnd(),m.lineStart=v}};function g(e,i){e=t(e,i),n.point(e[0],e[1])}function v(){l=NaN,m.point=y,n.lineStart()}function y(i,r){var o=gu([i,r]),a=t(i,r);e(l,h,u,f,p,d,l=a[0],h=a[1],u=i,f=o[0],p=o[1],d=o[2],16,n),n.point(l,h)}function w(){m.point=g,n.lineEnd()}function x(){v(),m.point=_,m.lineEnd=b}function _(t,n){y(i=t,n),r=l,o=h,a=f,s=p,c=d,m.point=y}function b(){e(l,h,u,f,p,d,r,o,i,a,s,c,16,n),m.lineEnd=w,w()}return m}}(t,n):function(t){return Ql({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var oh=Ql({point:function(t,n){this.stream.point(t*qc,n*qc)}});function ah(t,n,e,i,r,o){if(!o)return function(t,n,e,i,r){function o(o,a){return[n+t*(o*=i),e-t*(a*=r)]}return o.invert=function(o,a){return[(o-n)/t*i,(e-a)/t*r]},o}(t,n,e,i,r);var a=Dc(o),s=Rc(o),c=a*t,u=s*t,l=a/t,h=s/t,f=(s*e-a*n)/t,p=(s*n+a*e)/t;function d(t,o){return[c*(t*=i)-u*(o*=r)+n,e-u*t-c*o]}return d.invert=function(t,n){return[i*(l*t-h*n+f),r*(p-h*t-l*n)]},d}function sh(t){return function(t){var n,e,i,r,o,a,s,c,u,l,h=150,f=480,p=250,d=0,m=0,g=0,v=0,y=0,w=0,x=1,_=1,b=null,M=Vu,k=null,S=ol,T=.5;function C(t){return c(t[0]*qc,t[1]*qc)}function L(t){return(t=c.invert(t[0],t[1]))&&[t[0]*$c,t[1]*$c]}function H(){var t=ah(h,0,0,x,_,w).apply(null,n(d,m)),i=ah(h,f-t[0],p-t[1],x,_,w);return e=function(t,n,e){return(t%=Uc)?n||e?Uu(ju(t),zu(n,e)):ju(t):n||e?zu(n,e):$u}(g,v,y),s=Uu(n,i),c=Uu(e,s),a=rh(s,T),A()}function A(){return u=l=null,C}return C.stream=function(t){return u&&l===t?u:u=oh(function(t){return Ql({point:function(n,e){var i=t(n,e);return this.stream.point(i[0],i[1])}})}(e)(M(a(S(l=t)))))},C.preclip=function(t){return arguments.length?(M=t,b=void 0,A()):M},C.postclip=function(t){return arguments.length?(S=t,k=i=r=o=null,A()):S},C.clipAngle=function(t){return arguments.length?(M=+t?Gu(b=t*qc):(b=null,Vu),A()):b*$c},C.clipExtent=function(t){return arguments.length?(S=null==t?(k=i=r=o=null,ol):Ku(k=+t[0][0],i=+t[0][1],r=+t[1][0],o=+t[1][1]),A()):null==k?null:[[k,i],[r,o]]},C.scale=function(t){return arguments.length?(h=+t,H()):h},C.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],H()):[f,p]},C.center=function(t){return arguments.length?(d=t[0]%360*qc,m=t[1]%360*qc,H()):[d*$c,m*$c]},C.rotate=function(t){return arguments.length?(g=t[0]%360*qc,v=t[1]%360*qc,y=t.length>2?t[2]%360*qc:0,H()):[g*$c,v*$c,y*$c]},C.angle=function(t){return arguments.length?(w=t%360*qc,H()):w*$c},C.reflectX=function(t){return arguments.length?(x=t?-1:1,H()):x<0},C.reflectY=function(t){return arguments.length?(_=t?-1:1,H()):_<0},C.precision=function(t){return arguments.length?(a=rh(s,T=t*t),A()):Bc(T)},C.fitExtent=function(t,n){return eh(C,t,n)},C.fitSize=function(t,n){return function(t,n,e){return eh(t,[[0,0],n],e)}(C,t,n)},C.fitWidth=function(t,n){return function(t,n,e){return nh(t,(function(e){var i=+n,r=i/(e[1][0]-e[0][0]),o=(i-r*(e[1][0]+e[0][0]))/2,a=-r*e[0][1];t.scale(150*r).translate([o,a])}),e)}(C,t,n)},C.fitHeight=function(t,n){return function(t,n,e){return nh(t,(function(e){var i=+n,r=i/(e[1][1]-e[0][1]),o=-r*e[0][0],a=(i-r*(e[1][1]+e[0][1]))/2;t.scale(150*r).translate([o,a])}),e)}(C,t,n)},function(){return n=t.apply(this,arguments),C.invert=n.invert&&L,H()}}((function(){return t}))()}function ch(t,n){return[t,n]}function uh(){return sh(ch).scale(152.63)}ch.invert=ch;var lh=t=>()=>t;function hh(t,{sourceEvent:n,target:e,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function fh(t,n,e){this.k=t,this.x=n,this.y=e}fh.prototype={constructor:fh,scale:function(t){return 1===t?this:new fh(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new fh(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ph=new fh(1,0,0);function dh(t){t.stopImmediatePropagation()}function mh(t){t.preventDefault(),t.stopImmediatePropagation()}function gh(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function vh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function yh(){return this.__zoom||ph}function wh(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function xh(){return navigator.maxTouchPoints||"ontouchstart"in this}function _h(t,n,e){var i=t.invertX(n[0][0])-e[0][0],r=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}const bh=[].indexOf||function(t){for(let n=0,e=this.length;n<e;n++)if(n in this&&this[n]===t)return n;return-1},Mh={legend:!1,zoom:!1,graticule:!1,hover:!1,link:!1};function kh(n,e,i){const r=Object.assign({},Mh,i),o=n.getBoundingClientRect(),a=Math.round(o.width),s=Math.round(o.height);let c=Fo(null);const u=Fo(".js-map-data"),l=u.attr("data-map-data"),h=JSON.parse(l),f=uh().scale(a/2/Math.PI).translate([0,0]),p=function(){var t,n,e,i=gh,r=vh,o=_h,a=wh,s=xh,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,h=_n,f=Bo("start","zoom","end"),p=500,d=0,m=10;function g(t){t.property("__zoom",yh).on("wheel.zoom",M).on("mousedown.zoom",k).on("dblclick.zoom",S).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new fh(n,t.x,t.y)}function y(t,n,e){var i=n[0]-e[0]*t.k,r=n[1]-e[1]*t.k;return i===t.x&&r===t.y?t:new fh(t.k,i,r)}function w(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,n,e,i){t.on("start.zoom",(function(){_(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){_(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,o=arguments,a=_(t,o).event(i),s=r.apply(t,o),c=null==e?w(s):"function"==typeof e?e.apply(t,o):e,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=t.__zoom,f="function"==typeof n?n.apply(t,o):n,p=h(l.invert(c).concat(u/l.k),f.invert(c).concat(u/f.k));return function(t){if(1===t)t=f;else{var n=p(t),e=u/n[2];t=new fh(e,c[0]-n[0]*e,c[1]-n[1]*e)}a.zoom(null,t)}}))}function _(t,n,e){return!e&&t.__zooming||new b(t,n)}function b(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,n),this.taps=0}function M(t,...n){if(i.apply(this,arguments)){var e=_(this,n).event(t),r=this.__zoom,s=Math.max(c[0],Math.min(c[1],r.k*Math.pow(2,a.apply(this,arguments)))),l=Ro(t);if(e.wheel)e.mouse[0][0]===l[0]&&e.mouse[0][1]===l[1]||(e.mouse[1]=r.invert(e.mouse[0]=l)),clearTimeout(e.wheel);else{if(r.k===s)return;e.mouse=[l,r.invert(l)],wa(this),e.start()}mh(t),e.wheel=setTimeout(h,150),e.zoom("mouse",o(y(v(r,s),e.mouse[0],e.mouse[1]),e.extent,u))}function h(){e.wheel=null,e.end()}}function k(t,...n){if(!e&&i.apply(this,arguments)){var r=_(this,n,!0).event(t),a=Fo(t.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",p,!0),s=Ro(t,c),c=t.currentTarget,l=t.clientX,h=t.clientY;cs(t.view),dh(t),r.mouse=[s,this.__zoom.invert(s)],wa(this),r.start()}function f(t){if(mh(t),!r.moved){var n=t.clientX-l,e=t.clientY-h;r.moved=n*n+e*e>d}r.event(t).zoom("mouse",o(y(r.that.__zoom,r.mouse[0]=Ro(t,c),r.mouse[1]),r.extent,u))}function p(t){a.on("mousemove.zoom mouseup.zoom",null),us(t.view,r.moved),mh(t),r.event(t).end()}}function S(t,...n){if(i.apply(this,arguments)){var e=this.__zoom,a=Ro(t.changedTouches?t.changedTouches[0]:t,this),s=e.invert(a),c=e.k*(t.shiftKey?.5:2),h=o(y(v(e,c),a,s),r.apply(this,n),u);mh(t),l>0?Fo(this).transition().duration(l).call(x,h,a,t):Fo(this).call(g.transform,h,a,t)}}function T(e,...r){if(i.apply(this,arguments)){var o,a,s,c,u=e.touches,l=u.length,h=_(this,r,e.changedTouches.length===l).event(e);for(dh(e),a=0;a<l;++a)c=[c=Ro(s=u[a],this),this.__zoom.invert(c),s.identifier],h.touch0?h.touch1||h.touch0[2]===c[2]||(h.touch1=c,h.taps=0):(h.touch0=c,o=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(h.taps<2&&(n=c[0],t=setTimeout((function(){t=null}),p)),wa(this),h.start())}}function C(t,...n){if(this.__zooming){var e,i,r,a,s=_(this,n).event(t),c=t.changedTouches,l=c.length;for(mh(t),e=0;e<l;++e)r=Ro(i=c[e],this),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=r);if(i=s.that.__zoom,s.touch1){var h=s.touch0[0],f=s.touch0[1],p=s.touch1[0],d=s.touch1[1],m=(m=p[0]-h[0])*m+(m=p[1]-h[1])*m,g=(g=d[0]-f[0])*g+(g=d[1]-f[1])*g;i=v(i,Math.sqrt(m/g)),r=[(h[0]+p[0])/2,(h[1]+p[1])/2],a=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(y(i,r,a),s.extent,u))}}function L(t,...i){if(this.__zooming){var r,o,a=_(this,i).event(t),s=t.changedTouches,c=s.length;for(dh(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),p),r=0;r<c;++r)o=s[r],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=Ro(o,this),Math.hypot(n[0]-o[0],n[1]-o[1])<m)){var u=Fo(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return g.transform=function(t,n,e,i){var r=t.selection?t.selection():t;r.property("__zoom",yh),t!==r?x(t,n,e,i):r.interrupt().each((function(){_(this,arguments).event(i).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},g.scaleBy=function(t,n,e,i){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)}),e,i)},g.scaleTo=function(t,n,e,i){g.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,a=null==e?w(t):"function"==typeof e?e.apply(this,arguments):e,s=i.invert(a),c="function"==typeof n?n.apply(this,arguments):n;return o(y(v(i,c),a,s),t,u)}),e,i)},g.translateBy=function(t,n,e,i){g.transform(t,(function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),r.apply(this,arguments),u)}),null,i)},g.translateTo=function(t,n,e,i,a){g.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==i?w(t):"function"==typeof i?i.apply(this,arguments):i;return o(ph.translate(s[0],s[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,u)}),i,a)},b.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=Fo(this.that).datum();f.call(t,this.that,new hh(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:f}),n)}},g.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:lh(+t),g):a},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:lh(!!t),g):i},g.touchable=function(t){return arguments.length?(s="function"==typeof t?t:lh(!!t),g):s},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:lh([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],g):[c[0],c[1]]},g.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(t){return arguments.length?(o=t,g):o},g.duration=function(t){return arguments.length?(l=+t,g):l},g.interpolate=function(t){return arguments.length?(h=t,g):h},g.on=function(){var t=f.on.apply(f,arguments);return t===f?g:t},g.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,g):Math.sqrt(d)},g.tapDistance=function(t){return arguments.length?(m=+t,g):m},g}().scaleExtent([1,20]).on("zoom",(function(t){r.zoom&&v.attr("transform",t.transform)})),d=function(t,n){var e,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),du(t,e(i))),i.result()}return o.area=function(t){return du(t,e(cl)),cl.result()},o.measure=function(t){return du(t,e(Vl)),Vl.result()},o.bounds=function(t){return du(t,e(vl)),vl.result()},o.centroid=function(t){return du(t,e(El)),El.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,ol):(t=n).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(n=null,new Jl):new Fl(n=t),"function"!=typeof r&&i.pointRadius(r),o):n},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(n)}().projection(f),m=function(){var t,n,e,i,r,o,a,s,c,u,l,h,f=10,p=f,d=90,m=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return T(Yc(i/d)*d,e,d).map(l).concat(T(Yc(s/m)*m,a,m).map(h)).concat(T(Yc(n/f)*f,t,f).filter((function(t){return jc(t%d)>Lc})).map(c)).concat(T(Yc(o/p)*p,r,p).filter((function(t){return jc(t%m)>Lc})).map(u))}return v.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},v.outline=function(){return{type:"Polygon",coordinates:[l(i).concat(h(a).slice(1),l(e).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(i=+t[0][0],e=+t[1][0],s=+t[0][1],a=+t[1][1],i>e&&(t=i,i=e,e=t),s>a&&(t=s,s=a,a=t),v.precision(g)):[[i,s],[e,a]]},v.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],r=+e[1][1],n>t&&(e=n,n=t,t=e),o>r&&(e=o,o=r,r=e),v.precision(g)):[[n,o],[t,r]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(d=+t[0],m=+t[1],v):[d,m]},v.stepMinor=function(t){return arguments.length?(f=+t[0],p=+t[1],v):[f,p]},v.precision=function(f){return arguments.length?(g=+f,c=Qu(o,r,90),u=tl(n,t,g),l=Qu(s,a,90),h=tl(i,e,g),v):g},v.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}(),g=Fo(n).append("svg").attr("width",a).attr("height",s).on("click",(function(t){if(null!=t&&t.defaultPrevented)return t.stopPropagation()}),!0).append("g").attr("transform",`translate(${a/2},${s/2})`).call(p);g.append("rect").attr("class","map-background"+(r.zoom?" map-background-zoom":"")).attr("x",-a/2).attr("y",-s/2).attr("width",a).attr("height",s);const v=g.append("g");function y(t){const n=u.attr("data-search-path");return t.attr("xlink:href",(function(t){return`${n} country:${encodeURIComponent(t.properties.iso_a2)}`.replace(/=\s+/,"=")}))}function w(){if(c.node()===this)return c.classed("active",!1),c=Fo(null),v.transition().duration(750).call(p.translate([0,0]).scale(1).event);c.classed("active",!1),c=Fo(this).classed("active",!0)}function _(t){const n=b(t.attr("data-country"));if(c.classed("active",!1),c=Fo(null),n.length){const t=v.select("."+n);if(t.size())return c=Fo(t.node()),c.classed("active",!0),function(t){const n=u.attr("data-search-path");return t.attr("xlink:href",n)}(Fo(t.node().parentNode))}}function b(t){return t.toLowerCase().replace(/\s+/,"-")}function M(t){const n=h[t.properties.iso_a2]||0,e=Fo(".js-map-country-info");return e.transition().duration(100).style("opacity",1),e.html(""),e.append("span").text((function(){return`${0===n?"No":n} ${1===n?"event":"events"} originating from ${t.properties.name}`}))}function k(t){const n={US:[-98.5795,39.828175],CA:[-107.74899,59.24028],AU:[134.016341,-24.367113],SE:[15.985167,63.687217],GB:[-1.505067,53.647271],FR:[2.3488,48.85341],NO:[10.683333,59.933333],ID:[106.828333,-6.175],IN:[72.825833,18.975],MY:[101.7,3.133333]}[t.properties.iso_a2]||function(t){Vc=Gc=Zc=Jc=Kc=Qc=tu=nu=0,eu=new Adder,iu=new Adder,ru=new Adder,du(t,bu);var n=+eu,e=+iu,i=+ru,r=Fc(n,e,i);return r<Hc&&(n=Qc,e=tu,i=nu,Gc<Lc&&(n=Zc,e=Jc,i=Kc),(r=Fc(n,e,i))<Hc)?[NaN,NaN]:[Pc(e,n)*$c,Wc(i/r)*$c]}(t);return f(n)}function S(t){const e=Object.keys(t),i=e.length,o=Fo(n).datum().filter((function(t){const n=t.properties.iso_a2;return"-99"!==n&&bh.call(e,n)>=0}));for(const n of o){const t=n.properties;t.count=h[t.iso_a2]||0}const c=x(o,(function(t){return t.properties.count})),u=function(){return te.apply(null,arguments).exponent(.5)}().domain([0,c]).range([0,15]),l=v.selectAll(".map-point").data(o,(function(t){return t.properties.iso_a2}));if(l.enter().append("circle").attr("class",(t=>"map-point "+t.properties.iso_a2)).attr("r",0).transition(Va().delay(((t,n)=>n/i*15))).ease(Ja).attr("r",(t=>u(t.properties.count))).each((function(t){const n=Fo(this),[e,i]=k(t);return n.attr("cx",e).attr("cy",i)})),l.exit().remove(),r.legend&&o.length>0){g.select(".map-legend").remove();const t=g.append("g").attr("class","map-legend").attr("transform",`translate(${a/2-25},${s/2-50})`).selectAll("g").data([c,Math.round(c/3)]).enter().append("g");t.append("circle").attr("class","map-legend-circle").attr("cy",(function(t){return-u(t)})).attr("r",u),t.append("line").attr("x1",(function(t){return-u(t)/2+5})).attr("x2",(function(t){return-u(t)-20})).attr("y1",(function(t){return-2*u(t)})).attr("y2",(function(t){return-2*u(t)})).attr("class","map-legend-link"),t.append("text").attr("class","map-legend-text").attr("y",(function(t){return-2*u(t)})).attr("x",(function(t){return-u(t)-20})).attr("dy","0.5em").text((function(t){return t<10?t:Rn(".2s")(t)}))}}t("pjax:end",".js-pjax-container",(function(){const t=Fo(".js-map-data"),n=t.attr("data-map-data");S(JSON.parse(n)),r.link&&y(v.selectAll(".map-country-outline"));return _(t)})),function(t){const e=(i=t,"GeometryCollection"===(o=t.objects.countries).type?{type:"FeatureCollection",features:o.geometries.map((function(t){return bc(i,t)}))}:bc(i,o));var i,o;const a=Sc(t,t.objects.countries,(function(t,n){return t!==n})),s=Sc(t,t.objects.land),c=u.attr("data-search-path");Fo(n).datum(e.features),v.append("path").datum(s).attr("class","map-land").attr("d",d);const l=v.selectAll(".map-country").data(e.features).enter().append("a").attr("class","map-country-outline").attr("aria-label",(t=>t.properties.name));r.link?l.attr("data-pjax","").attr("xlink:href",(function(t){return`${c} country:${encodeURIComponent(t.properties.iso_a2)}`.replace(/=\s+/,"=")})):l.attr("role","button"),l.append("path").attr("class",(function(t){return`map-country ${b(t.properties.iso_a2)} ${b(t.properties.name)}`})).attr("d",d),r.hoverShowCountryInfo&&l.on("click",w).on("mouseover",M).on("mouseout",(function(){return Fo(".js-map-country-info").transition().style("opacity",0)})),v.append("path").datum(a).attr("class","map-borders").attr("d",d),r.graticule&&v.append("g").attr("class","map-graticule").selectAll("path").data(m.lines).enter().append("path").attr("d",d),_(u)}(e),S(h)}e(".js-audit-log-map",{initialize(t){!async function(t){t.classList.add("is-graph-loading");const n=await fetch("/world.json",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)return void t.classList.remove("is-graph-loading");const e=await n.json();kh(t,e,{legend:!0,graticule:!0,hoverShowCountryInfo:!0,link:!0,zoom:!0}),t.classList.remove("is-graph-loading")}(t)}}),t("click",".js-audit-log-map a[data-pjax]",(function(t){t.preventDefault(),t.stopPropagation();const n=t.currentTarget,e=document.getElementById("js-pjax-container"),i={url:n.href.baseVal,container:e};l(i)})),e(".js-sessions-map",{initialize(t){!async function(t){t.classList.add("is-graph-loading");const n=await fetch("/world.json",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok)return void t.classList.remove("is-graph-loading");const e=await n.json();kh(t,e),t.classList.remove("is-graph-loading")}(t)}})}}}));
//# sourceMappingURL=graphs-80f826b6.js.map
